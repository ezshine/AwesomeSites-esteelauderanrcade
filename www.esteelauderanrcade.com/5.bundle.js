(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{223:function(t,e,n){"use strict";n.d(e,"b",(function(){return o})),n.d(e,"d",(function(){return s})),n.d(e,"e",(function(){return r})),n.d(e,"c",(function(){return l})),n.d(e,"a",(function(){return c}));var i=n(1),a=i.vec3.create();function o(t,e){return e[0]=(t>>16&255)/255,e[1]=(t>>8&255)/255,e[2]=(255&t)/255,e}function s(t){return o(t,i.vec3.create())}function r(t,e){const n=o(t,i.vec3.create());return n[0]*=e,n[1]*=e,n[2]*=e,n}function l(t,e,n){const i=t>>16,a=t>>8&255,o=255&t;return(i+n*((e>>16)-i)<<16)+(a+n*((e>>8&255)-a)<<8)+(0|o+n*((255&e)-o))}function c(t,e,n){return function(t){a[0]=(t>>16&255)/255,a[1]=(t>>8&255)/255,a[2]=(255&t)/255}(t),n[0]=a[0],n[1]=a[1],n[2]=a[2],n[3]=e,n}},224:function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var i=n(1);const a=i.vec3.create(),o=i.mat4.create(),s=(i.mat3.create(),i.mat4.create());class r{constructor(){this._invalid=!0,this.pos=i.vec3.create(),this.dir=i.vec3.create()}unproject(t,e,n=!1){i.mat4.invert(o,e._viewProj),e._parent&&n&&(i.mat4.invert(s,e._parent._wmatrix),i.mat4.multiply(o,s,o)),a[0]=t[0],a[1]=t[1],a[2]=-1,i.vec3.transformMat4(this.pos,a,o),a[2]=1,i.vec3.transformMat4(this.dir,a,o),i.vec3.subtract(this.dir,this.dir,this.pos),i.vec3.normalize(this.dir,this.dir)}invalidate(){this._invalid=!0}}},225:function(t,e,n){"use strict";n.d(e,"b",(function(){return u})),n.d(e,"a",(function(){return d}));var i=n(29),a=n(36),o=n(17);class s extends o.b{constructor(t,e,n,i){super(t,e,n,i),this.textureType=o.a.TEXTURE_CUBE,this._target=34067,t.bindTexture(34067,this.id),this.setFilter(!0)}fromImages(t){var e=this.gl,n=this.format,i=this.internal,a=this.type;this.width=t[0].width,this.height=t[0].height,e.bindTexture(34067,this.id),e.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X,0,i,n,a,t[0]),e.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_Y,0,i,n,a,t[1]),e.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_Z,0,i,n,a,t[2]),e.texImage2D(e.TEXTURE_CUBE_MAP_NEGATIVE_X,0,i,n,a,t[3]),e.texImage2D(e.TEXTURE_CUBE_MAP_NEGATIVE_Y,0,i,n,a,t[4]),e.texImage2D(e.TEXTURE_CUBE_MAP_NEGATIVE_Z,0,i,n,a,t[5])}}var r,l=n(37),c=n(35);!function(t){t[t.CLAMP=0]="CLAMP",t[t.REPEAT=1]="REPEAT",t[t.MIRROR=2]="MIRROR"}(r||(r={}));class h extends i.a{constructor(t,e,n){super(t,n),this.request=e}set request(t){this._request=t}get request(){return this._request}get value(){return this.texture}load(){const t=this.group.lodLevel;this.loadLevelAsync(t)}unload(){}async loadLevelAsync(t){const e=this.group.loader.extTextures,[n,i]=c.a.getCodecForRequest(this._request,e);await this.loadSourceLod(i.lods[t]),await n.decodeLod(i,t,e),this.group.loader.upload(this,i.datas);for(let e=0;e<i.lods[t].files.length;e++)this.group.removeResourceByName(i.lods[t].files[e]);this.resolve(this.texture)}async loadSourceLod(t){const e=[];for(let n=0;n<t.files.length;n++)e.push(Object(l.c)(t.files[n],this.group));const n=await Promise.all(e);return t.buffers=n,n}}class u extends h{constructor(t,e,n){super(t,e,n),this.texture=new a.a(this.group.gl)}}class d extends h{constructor(t,e,n){super(t,e,n),this.texture=new s(this.group.gl)}async loadLevelAsync(t){const e=this.group.loader.extTextures,[n,i]=c.a.getCodecForRequest(this._request,e);for(let t=0;t<i.lods.length;t++)await this.loadSourceLod(i.lods[t]);await n.decodeCube(i,e),this.group.loader.upload(this,i.datas);for(let t=0;t<i.lods.length;t++)for(let e=0;e<i.lods[t].files.length;e++)this.group.removeResourceByName(i.lods[t].files[e]);this.resolve(this.texture)}}},229:function(t,e,n){"use strict";n.d(e,"a",(function(){return d}));var i=n(14);const a=["WEBGL_compressed_texture_s3tc","MOZ_WEBGL_compressed_texture_s3tc","WEBKIT_WEBGL_compressed_texture_s3tc"],o=["WEBGL_compressed_texture_pvrtc","WEBKIT_WEBGL_compressed_texture_pvrtc"],s=["WEBGL_compressed_texture_etc1","WEBKIT_WEBGL_compressed_texture_etc1"],r=["WEBGL_compressed_texture_astc"];class l{constructor(t){this.gl=t,this.dxt=this.pickExtension(a),this.pvr=this.pickExtension(o),this.etc=this.pickExtension(s),this.astc=this.pickExtension(r)}pickExtension(t){let e=null;for(const n of t)if(e=this.gl.getExtension(n),e)break;return e}}var c=n(17),h=n(19);class u{constructor(t){this.gl=t,this.extTextures=new l(t),this.extAniso=t.getExtension("MOZ_EXT_texture_filter_anisotropic")||t.getExtension("WEBKIT_EXT_texture_filter_anisotropic")||t.getExtension("EXT_texture_filter_anisotropic")}upload(t,e){this.gl;const n=t.texture;if(n.textureType!==e.textureType)throw new Error("TexturesLoader::upload() texture type mismatch");switch(n.bind(),n.textureType){case c.a.TEXTURE_2D:this.uploadTexture2D(n,e,0);break;case c.a.TEXTURE_CUBE:this.uploadTextureCube(n,e,0)}}uploadTexture2D(t,e,n=0){this.uploadAllSurfaceLevels(t,e,n,0,t.textureType)}uploadTextureCube(t,e,n=0){for(let i=0;i<6;i++){const a=Object(h.b)(i);this.uploadAllSurfaceLevels(t,e,n,i,a)}}uploadAllSurfaceLevels(t,e,n,i,a){switch(e.datatype){case h.a.RAW_COMPRESSED:this.uploadLevelsCompressed(t,e,n,i,a);break;case h.a.IMAGE:this.uploadLevels(t,e,n,i,a);break;case h.a.RAW:this.uploadLevelsRaw(t,e,n,i,a)}}uploadLevels(t,e,n,i,a){const o=e.sources[n].surfaces[i];for(let t=0;t<o.length;t++)this.gl.texImage2D(a,t,e.internalformat,e.format,e.type,o[t].data)}uploadLevelsRaw(t,e,n,i,a){const o=e.sources[n].surfaces[i];for(let t=0;t<o.length;t++){const n=o[t];this.gl.texImage2D(a,t,e.internalformat,n.width,n.height,0,e.format,e.type,n.data)}}uploadLevelsCompressed(t,e,n,i,a){const o=e.sources[n].surfaces[i];let s=o[0].width,r=o[0].height;for(let t=0;t<o.length;t++){const n=o[t];this.gl.compressedTexImage2D(a,t,e.internalformat,s,r,0,n.data),s=Math.max(1,s>>1),r=Math.max(1,r>>1)}}}class d extends i.a{constructor(t="default",e,n=i.a.default){super(t,n),this._lodLevel=0,this.gl=e,this.loader=new u(e)}set lodLevel(t){this._lodLevel=t}get lodLevel(){return this._lodLevel}}},231:function(t,e,n){"use strict";n.d(e,"a",(function(){return u}));var i=n(1);const a=i.quat.create(),o=i.quat.create(),s=i.quat.create(),r=i.vec3.create(),l=i.vec3.create(),c=(i.mat4.create(),i.mat4.create());var h;!function(t){t[t.NONE=-1]="NONE",t[t.IDLE=0]="IDLE",t[t.ORBIT=1]="ORBIT",t[t.PAN=2]="PAN",t[t.DOLLY=3]="DOLLY"}(h||(h={}));class u{constructor(t){this.onMouseMove=t=>{var e=this._getModeForEvt(t);this.setMode(e),function(t,e,n){n[0]=2*t.clientX/(e.width/window.devicePixelRatio)-1,n[1]=-(2*t.clientY/(e.height/window.devicePixelRatio)-1)}(t,this.el,this.mouse),this.action.update(this.mouse)},this.el=t,this.mouse=i.vec3.fromValues(0,0,1),this.cam=null,this.orbitRadius=-10,this.mode=h.NONE}start(t){this.cam=t,this.el.addEventListener("mousemove",this.onMouseMove),this.mode=-1,this.setMode(h.IDLE)}stop(){this.cam=null,this.el.removeEventListener("mousemove",this.onMouseMove)}update(t){}setMode(t){if(this.mode!==t){switch(this.mode=t,t){case h.IDLE:this.action=new d;break;case h.ORBIT:this.action=new p;break;case h.PAN:this.action=new m;break;case h.DOLLY:this.action=new v}this.unproject(r),this.action.start(this.cam,r,this.mouse)}}unproject(t){this.cam.updateMatrix(),i.mat4.invert(c,this.cam.lens._proj),i.vec3.transformMat4(r,this.mouse,c),i.vec3.scale(r,r,this.orbitRadius/r[2]),i.vec3.transformMat4(t,r,this.cam._matrix)}_getModeForEvt(t){return 2!==t.which?h.IDLE:t.altKey?t.ctrlKey?h.DOLLY:h.ORBIT:h.PAN}}class d{start(t,e,n){}update(t){}}class p{constructor(){this.initialX=i.vec3.create(),this.initialR=i.quat.create(),this.initialP=i.vec3.create(),this.startMouse=i.vec3.create(),this.focus=i.vec3.create()}start(t,e,n){this.cam=t,i.vec3.copy(this.initialX,this.cam._matrix),i.vec3.copy(this.startMouse,n),i.quat.copy(this.initialR,t.rotation),i.vec3.subtract(this.initialP,t.position,e),i.vec3.copy(this.focus,e)}update(t){i.vec3.subtract(r,t,this.startMouse),i.quat.setAxisAngle(s,this.initialX,5*r[1]),i.quat.rotateY(o,a,5*-r[0]),i.quat.multiply(o,o,s),i.quat.multiply(this.cam.rotation,o,this.initialR),i.vec3.transformQuat(r,this.initialP,o),i.vec3.add(this.cam.position,this.focus,r),this.cam.invalidate()}}class m{constructor(){this.initialX=i.vec3.create(),this.initialY=i.vec3.create(),this.initialP=i.vec3.create(),this.startMouse=i.vec3.create(),this.focus=i.vec3.create()}start(t,e,n){this.cam=t,i.vec3.copy(this.initialX,this.cam._matrix),i.vec3.copy(this.initialP,this.cam.position),this.initialY[0]=this.cam._matrix[4],this.initialY[1]=this.cam._matrix[5],this.initialY[2]=this.cam._matrix[6],i.vec3.copy(this.startMouse,n),i.vec3.copy(this.focus,e)}update(t){i.vec3.subtract(r,t,this.startMouse),i.vec3.scale(l,this.initialX,10*-r[0]),i.vec3.scaleAndAdd(l,l,this.initialY,10*-r[1]),i.vec3.add(this.cam.position,this.initialP,l),this.cam.invalidate()}}class v{constructor(){this.initialZ=i.vec3.create(),this.initialP=i.vec3.create(),this.startMouse=i.vec3.create(),this.focus=i.vec3.create()}start(t,e,n){this.cam=t,i.vec3.copy(this.initialP,this.cam.position),i.vec3.subtract(this.initialZ,this.cam.position,e),i.vec3.copy(this.startMouse,n),i.vec3.copy(this.focus,e)}update(t){i.vec3.subtract(r,t,this.startMouse),i.vec3.scale(r,this.initialZ,5*r[1]),i.vec3.add(this.cam.position,this.initialP,r),this.cam.invalidate()}}},233:function(t,e,n){"use strict";n.d(e,"a",(function(){return u}));var i=n(78),a=n(224),o=n(1);const s=o.mat4.create(),r=new Float32Array(4),l=new Float32Array(4),c=new a.a;class h{constructor(t){this.onTouchEnd=()=>{this.touch.onEnd.off(this.onTouchEnd),this.onLost.emit(),this.active=!1,this.touch=null},this.touchPos=new Float32Array(3),this.touchWPos=new Float32Array(3),this.onPicked=new i.a,this.onLost=new i.a,this.picking=t,this.touch=null,this.active=!1}_updatePos(t){this.touchWPos[0]=t[0],this.touchWPos[1]=t[1],this.touchWPos[2]=t[2],o.mat4.invert(s,this.picking.node._wmatrix),o.vec3.transformMat4(this.touchPos,this.touchWPos,s)}_picked(t,e){this.touch&&this.onTouchEnd(),this._updatePos(e),this.touch=t,this.active=!0,t.onEnd.on(this.onTouchEnd),this.onPicked.emit()}}class u{constructor(t){this.onTouchAdded=t=>{c.unproject(t.coords,this.scene.camera),l.set([0,0,0,1e4]);for(var e=null,n=0;n<this.pickables.length;n++){0!==this.pickables[n].picking.raycast(c,r)&&l[3]>r[3]&&(e=this.pickables[n],l.set(r))}null!==e&&e._picked(t,l)},this.onTouchRemoved=t=>{},this.scene=t,this.pickables=[],this.inputs=this.scene.inputs,this.inputs.onTouchAdded.on(this.onTouchAdded),this.inputs.onTouchRemoved.on(this.onTouchRemoved)}registerPicking(t){for(var e=0;e<this.pickables.length;e++)if(this.pickables[e].picking===t)return this.pickables[e];var n=new h(t);return this.pickables.push(n),n}dispose(){this.inputs.onTouchAdded.off(this.onTouchAdded),this.inputs.onTouchRemoved.off(this.onTouchRemoved)}}},235:function(t,e,n){"use strict";var i,a;n.d(e,"b",(function(){return o})),n.d(e,"a",(function(){return s})),function(t){t[t.CLAMP=0]="CLAMP",t[t.REPEAT=1]="REPEAT",t[t.MIRROR=2]="MIRROR"}(i||(i={})),function(t){t[t.NEAREST=9728]="NEAREST",t[t.LINEAR=9729]="LINEAR",t[t.NEAREST_MIPMAP_NEAREST=9984]="NEAREST_MIPMAP_NEAREST",t[t.LINEAR_MIPMAP_NEAREST=9985]="LINEAR_MIPMAP_NEAREST",t[t.NEAREST_MIPMAP_LINEAR=9986]="NEAREST_MIPMAP_LINEAR",t[t.LINEAR_MIPMAP_LINEAR=9987]="LINEAR_MIPMAP_LINEAR"}(a||(a={}));class o{constructor(t){"string"==typeof t&&(t={std:t}),this.sources=[];for(const e in t){const n=t[e];this.sources.push({codec:e,lods:[{files:[n],buffers:null}],datas:null})}}}class s{constructor(t){this.sources=[];for(const e in t){let n=[];for(let i=0;i<t[e].length;i++)n.push({files:[t[e][i]],buffers:null});this.sources.push({codec:e,lods:n,datas:null})}}}},236:function(t,e){var n=function(t){return"attribute vec2 aPosition;\nattribute vec2 aTexCoord;\n\nvarying vec2 vTexCoord0;\n\n  \nvoid main( void ){\n\n  gl_Position = vec4( aPosition, 0.0, 1.0 );\n  vTexCoord0 = aTexCoord;\n\n}\n","attribute vec2 aPosition;\nattribute vec2 aTexCoord;\n\nvarying vec2 vTexCoord0;\n\n  \nvoid main( void ){\n\n  gl_Position = vec4( aPosition, 0.0, 1.0 );\n  vTexCoord0 = aTexCoord;\n\n}\n"};n.toString=n,t.exports=n},237:function(t,e){var n=function(t){return"\nvarying vec2 vTexCoord0;\n\nuniform sampler2D tTex;\n\nvoid main(void){\n  \n  vec4 tex = texture2D( tTex, vTexCoord0 );\n  gl_FragColor.rgb = tex.rgb;\n  gl_FragColor.a = tex.a;\n  // gl_FragColor.rgb = vec3(tex.a);\n  // gl_FragColor.a = 1.0;\n\n}\n","\nvarying vec2 vTexCoord0;\n\nuniform sampler2D tTex;\n\nvoid main(void){\n  \n  vec4 tex = texture2D( tTex, vTexCoord0 );\n  gl_FragColor.rgb = tex.rgb;\n  gl_FragColor.a = tex.a;\n  // gl_FragColor.rgb = vec3(tex.a);\n  // gl_FragColor.a = 1.0;\n\n}\n"};n.toString=n,t.exports=n},245:function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));var i=n(225);class a{constructor(t){this._request=t,this._resources=[]}load(t,e){const n=new i.b(t,this._request,e);return this._resources.push(n),n}}},266:function(t,e,n){"use strict";var i=n(1),a=n.n(i);const o=a.a.vec3,s=a.a.mat4,r=a.a.mat3,l=o.create(),c=o.create(),h=o.create(),u=o.create(),d=o.create(),p=s.create(),m=r.create(),v=o.create(),g=o.create();e.a=class{constructor(t,e,n,i){this.node=t,this.indices=e,this.vertices=n,this.doubleSided=!!i,this.pos=new Float32Array(3),this.id=""}raycast(t,e){s.invert(p,this.node._wmatrix),r.fromMat4(m,p),o.transformMat4(v,t.pos,p),o.transformMat3(g,t.dir,m);for(var n,i,a,f,b=v,x=g,_=this.indices,y=this.vertices,w=0;w<_.length;w+=3){n=3*_[w+0],i=3*_[w+1],a=3*_[w+2],l[0]=y[i+0]-y[n+0],l[1]=y[i+1]-y[n+1],l[2]=y[i+2]-y[n+2],c[0]=y[a+0]-y[n+0],c[1]=y[a+1]-y[n+1],c[2]=y[a+2]-y[n+2],o.cross(h,l,c);var C=o.dot(x,h);if(C>0){if(!this.doubleSided)continue;f=1}else{if(!(C<0))continue;f=-1,C=-C}u[0]=b[0]-y[n+0],u[1]=b[1]-y[n+1],u[2]=b[2]-y[n+2],o.cross(d,u,c);var T=f*o.dot(x,d);if(!(T<0)){o.cross(d,l,u);var P=f*o.dot(x,d);if(!(P<0||T+P>C)){var M=-f*o.dot(u,h);if(!(M<0))return o.scaleAndAdd(d,b,x,M/C),o.transformMat4(d,d,this.node._wmatrix),e[0]=d[0],e[1]=d[1],e[2]=d[2],e[3]=M/C,this.pos[0]=d[0],this.pos[1]=d[1],this.pos[2]=d[2],f}}}return 0}getPos(){return this.pos}}},270:function(t,e,n){var i=n(360);"string"==typeof i&&(i=[[t.i,i,""]]);var a={hmr:!0,transform:void 0,insertInto:void 0};n(11)(i,a);i.locals&&(t.exports=i.locals)},271:function(t,e,n){var i=n(362);"string"==typeof i&&(i=[[t.i,i,""]]);var a={hmr:!0,transform:void 0,insertInto:void 0};n(11)(i,a);i.locals&&(t.exports=i.locals)},272:function(t,e,n){var i=n(364);"string"==typeof i&&(i=[[t.i,i,""]]);var a={hmr:!0,transform:void 0,insertInto:void 0};n(11)(i,a);i.locals&&(t.exports=i.locals)},289:function(t,e,n){"use strict";var i=function(){var t=this,e=t.$createElement;return(t._self._c||e)("div",{on:{"&mouseenter":function(e){return t.onMouseEnter(e)},"&mouseleave":function(e){return t.onMouseLeave(e)}}},[t._t("default")],2)};i._withStripped=!0;var a={name:"CursorTrigger",props:{active:{type:Boolean,default:!0},name:{type:String,default:""},value:{type:String,default:""}},watch:{active:"onActiveChange"},methods:{onMouseEnter(t){this.active&&this.$eventHub.$emit("cursor:enter",this.name,this.value,t)},onMouseLeave(){this.active&&this.$eventHub.$emit("cursor:leave",this.name)},onActiveChange(){this.active||this.$eventHub.$emit("cursor:leave",this.name)}}},o=n(5),s=Object(o.a)(a,i,[],!1,null,null,null);s.options.__file="src/components/cursor-trigger/cursor-trigger.vue";e.a=s.exports},311:function(t,e){var n=function(t){return"precision mediump float;\n\nuniform sampler2D tInput;\n\nuniform vec4 uKernel[BLOOM_SAMPLES];\nvarying vec2 vTexCoordVP;\n\nvoid main(void)\n{\n\n  vec3 color = vec3(0.0);\n\n  for(int i=0; i<BLOOM_SAMPLES; ++i)\n  {\n    vec3 kernel = uKernel[i].xyz;\n    color += texture2D( tInput,vTexCoordVP + kernel.xy ).xyz * kernel.z;\n  }\n\n  gl_FragColor = vec4( color, 0.0 );\n  //gl_FragColor = vec4( texture2D( tInput,vTexCoord ).xyz, 0.0 );\n}\n","precision mediump float;\n\nuniform sampler2D tInput;\n\nuniform vec4 uKernel[BLOOM_SAMPLES];\nvarying vec2 vTexCoordVP;\n\nvoid main(void)\n{\n\n  vec3 color = vec3(0.0);\n\n  for(int i=0; i<BLOOM_SAMPLES; ++i)\n  {\n    vec3 kernel = uKernel[i].xyz;\n    color += texture2D( tInput,vTexCoordVP + kernel.xy ).xyz * kernel.z;\n  }\n\n  gl_FragColor = vec4( color, 0.0 );\n  //gl_FragColor = vec4( texture2D( tInput,vTexCoord ).xyz, 0.0 );\n}\n"};n.toString=n,t.exports=n},312:function(t,e){var n=function(t){return"uniform vec3 uBloomColor;\nuniform sampler2D tBloom;","uniform vec3 uBloomColor;\nuniform sampler2D tBloom;"};n.toString=n,t.exports=n},313:function(t,e){var n=function(t){return"c+= uBloomColor * texture2D(tBloom,texCoordFull).xyz;","c+= uBloomColor * texture2D(tBloom,texCoordFull).xyz;"};n.toString=n,t.exports=n},319:function(t,e){var n=function(t){return"attribute vec2 aPosition;\n  \nvoid main( void ){\n  gl_Position = vec4( aPosition, 0.0, 1.0 );\n}\n","attribute vec2 aPosition;\n  \nvoid main( void ){\n  gl_Position = vec4( aPosition, 0.0, 1.0 );\n}\n"};n.toString=n,t.exports=n},320:function(t,e){var n=function(t){return"\nuniform float uOpacity;\n\nvoid main() {\n  vec3 black = vec3(0.0);\n  float alpha = uOpacity;\n\n  gl_FragColor = vec4(black, uOpacity);\n}","\nuniform float uOpacity;\n\nvoid main() {\n  vec3 black = vec3(0.0);\n  float alpha = uOpacity;\n\n  gl_FragColor = vec4(black, uOpacity);\n}"};n.toString=n,t.exports=n},321:function(t,e){var n=function(t){return"attribute vec3 aPosition;\n\nuniform mat4 uWorldMatrix;\nuniform mat4 uMVP;\n\nvarying vec3 vWorldDirection;\n\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\n\nvoid main(void) {\n\n    vWorldDirection = transformDirection(aPosition, uWorldMatrix);\n\n    gl_Position = uMVP * vec4(aPosition, 1.0);\n\n}","attribute vec3 aPosition;\n\nuniform mat4 uWorldMatrix;\nuniform mat4 uMVP;\n\nvarying vec3 vWorldDirection;\n\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\n\nvoid main(void) {\n\n    vWorldDirection = transformDirection(aPosition, uWorldMatrix);\n\n    gl_Position = uMVP * vec4(aPosition, 1.0);\n\n}"};n.toString=n,t.exports=n},322:function(t,e){var n=function(t){return"precision highp float;\n\nuniform float uTime;\nuniform vec3 uColor;\nuniform vec3 uOverlayColor;\nuniform float uOverlayOpacity;\nuniform float uOverlayFactor;\nuniform float uEnvRotation;\nuniform float uAmbilightStrength;\n\nuniform samplerCube tEnv;\nuniform samplerCube tAmbilight;\nuniform sampler2D tAmbilightNoise;\n\nvarying vec3 vWorldDirection;\n\nmat4 axisAngleRotation(vec3 axis, float angle) {\n    axis = normalize(axis);\n    float s = sin(angle);\n    float c = cos(angle);\n    float oc = 1.0 - c;\n    \n    return mat4(oc * axis.x * axis.x + c,           oc * axis.x * axis.y - axis.z * s,  oc * axis.z * axis.x + axis.y * s,  0.0,\n                oc * axis.x * axis.y + axis.z * s,  oc * axis.y * axis.y + c,           oc * axis.y * axis.z - axis.x * s,  0.0,\n                oc * axis.z * axis.x - axis.y * s,  oc * axis.y * axis.z + axis.x * s,  oc * axis.z * axis.z + c,           0.0,\n                0.0,                                0.0,                                0.0,                                1.0);\n}\n\nfloat remap( in float x, in float a1, in float a2, in float b1, in float b2 ) {\n  return b1 + ( x - a1 ) * ( b2 - b1 ) / ( a2 - a1 );  \n}\n\nvec3 blendScreen(vec3 bottom, vec3 top) {\n  return (vec3(1.0) - ((vec3(1.0) - bottom) * (vec3(1.0) - top)));\n}\n\nvoid main(void) {\n\n  vec3 yAxis = vec3(0.0, 1.0, 0.0);\n  vec3 dir = (axisAngleRotation(yAxis, uEnvRotation) * vec4(vWorldDirection, 1.0)).xyz;\n\n  vec3 dome = textureCube(tEnv, dir).rgb * uColor;\n\n  \n  vec3 ambilightColor = textureCube(tAmbilight, dir).rgb;\n  float noise = texture2D(tAmbilightNoise, vec2(uTime * 0.05, 0.0)).r;\n  float ambilightNoise = remap(noise, 0.0, 1.0, 0.75, 1.5);\n  vec3 ambilight = vec3((ambilightColor * vec3(ambilightNoise)) * uAmbilightStrength);\n\n  vec3 finalColor = blendScreen(dome, ambilight);\n\n  finalColor = mix(finalColor, uOverlayColor, uOverlayOpacity * uOverlayFactor);\n\n  gl_FragColor = vec4(finalColor, 1.0);\n\n}\n","precision highp float;\n\nuniform float uTime;\nuniform vec3 uColor;\nuniform vec3 uOverlayColor;\nuniform float uOverlayOpacity;\nuniform float uOverlayFactor;\nuniform float uEnvRotation;\nuniform float uAmbilightStrength;\n\nuniform samplerCube tEnv;\nuniform samplerCube tAmbilight;\nuniform sampler2D tAmbilightNoise;\n\nvarying vec3 vWorldDirection;\n\nmat4 axisAngleRotation(vec3 axis, float angle) {\n    axis = normalize(axis);\n    float s = sin(angle);\n    float c = cos(angle);\n    float oc = 1.0 - c;\n    \n    return mat4(oc * axis.x * axis.x + c,           oc * axis.x * axis.y - axis.z * s,  oc * axis.z * axis.x + axis.y * s,  0.0,\n                oc * axis.x * axis.y + axis.z * s,  oc * axis.y * axis.y + c,           oc * axis.y * axis.z - axis.x * s,  0.0,\n                oc * axis.z * axis.x - axis.y * s,  oc * axis.y * axis.z + axis.x * s,  oc * axis.z * axis.z + c,           0.0,\n                0.0,                                0.0,                                0.0,                                1.0);\n}\n\nfloat remap( in float x, in float a1, in float a2, in float b1, in float b2 ) {\n  return b1 + ( x - a1 ) * ( b2 - b1 ) / ( a2 - a1 );  \n}\n\nvec3 blendScreen(vec3 bottom, vec3 top) {\n  return (vec3(1.0) - ((vec3(1.0) - bottom) * (vec3(1.0) - top)));\n}\n\nvoid main(void) {\n\n  vec3 yAxis = vec3(0.0, 1.0, 0.0);\n  vec3 dir = (axisAngleRotation(yAxis, uEnvRotation) * vec4(vWorldDirection, 1.0)).xyz;\n\n  vec3 dome = textureCube(tEnv, dir).rgb * uColor;\n\n  \n  vec3 ambilightColor = textureCube(tAmbilight, dir).rgb;\n  float noise = texture2D(tAmbilightNoise, vec2(uTime * 0.05, 0.0)).r;\n  float ambilightNoise = remap(noise, 0.0, 1.0, 0.75, 1.5);\n  vec3 ambilight = vec3((ambilightColor * vec3(ambilightNoise)) * uAmbilightStrength);\n\n  vec3 finalColor = blendScreen(dome, ambilight);\n\n  finalColor = mix(finalColor, uOverlayColor, uOverlayOpacity * uOverlayFactor);\n\n  gl_FragColor = vec4(finalColor, 1.0);\n\n}\n"};n.toString=n,t.exports=n},323:function(t,e,n){var i=function(t){var e="";return e+="#pragma SLOT version\n\n#pragma SLOT definitions\n\n#pragma SLOT precision\n\n"+n(75)()+"\n\n#pragma SLOT pv\n\nIN vec3 aPosition;\n\nuniform mat4 uMVP;\n\nOUT vec2 vTexCoord0;\n\nvoid main(void) {\n\n    #pragma SLOT v\n\n    vTexCoord0 = aTexCoord0;\n\n    gl_Position = uMVP * vec4(aPosition, 1.0);\n\n}"};i.toString=i,t.exports=i},324:function(t,e,n){var i=function(t){var e="";return e+="#pragma SLOT version\n\n#pragma SLOT definitions\n\n#pragma SLOT precision\n\n"+n(74)()+"\n\n#pragma SLOT pf\n\n#define PI 3.141592653589793\n\nuniform vec3 uColor;\nuniform float uTime;\nuniform float uDeformStrength;\n\nuniform sampler2D tMain;\nuniform sampler2D tNoise;\n\nIN vec2 vTexCoord0;\n\nvec2 animateUV(vec2 uv, vec2 offset, vec2 scale, float speed) {\n  vec2 animatedOffset = offset * uTime * speed;\n  vec2 scaledUV = uv * scale;\n\n  return scaledUV + animatedOffset;\n}\n\nfloat remap( in float x, in float a1, in float a2, in float b1, in float b2 ) {\n  return b1 + ( x - a1 ) * ( b2 - b1 ) / ( a2 - a1 );  \n}\n\nvec2 remap( in vec2 x, in vec2 a1, in vec2 a2, in vec2 b1, in vec2 b2 ) {\n  return b1 + ( x - a1 ) * ( b2 - b1 ) / ( a2 - a1 );  \n}\n\nvoid main(void) {\n\n  #pragma SLOT f\n  \n  vec2 uv;\n\n  uv = animateUV(vTexCoord0, vec2(1.0, 0.0), vec2(1.0, 1.0), 0.5);\n  float noise = texture2D(tNoise, uv).r;\n\n  uv = animateUV(vTexCoord0, vec2(1.0, 0.0), vec2(1.0, 1.0), 0.1);\n  uv.y += remap(sin(uv.x * PI * 10.0), -1.0, 1.0, noise * uDeformStrength, -noise * uDeformStrength);\n\n  float wavyOutline = texture2D(tMain, uv).r;\n  float colorFalloff = pow(texture2D(tMain, vTexCoord0).r, 2.0);\n  \n  vec3 finalColor = mix(uColor, uColor + vec3(0.75), colorFalloff);\n  float alpha = wavyOutline;\n\n  FragColor = vec4(finalColor, alpha);\n\n}\n"};i.toString=i,t.exports=i},325:function(t,e,n){var i=function(t){var e="";return e+="#pragma SLOT version\n\n#pragma SLOT definitions\n\n#pragma SLOT precision\n\n"+n(75)()+"\n\n#pragma SLOT pv\n\nIN vec3 aPosition;\nIN vec2 aTexCoord1;\n\nuniform mat4 uMVP;\n\nOUT vec2 vTexCoord0;\nOUT vec2 vTexCoord1;\n\nvoid main(void) {\n\n    #pragma SLOT v\n\n    vTexCoord0 = aTexCoord0;\n    vTexCoord1 = aTexCoord1;\n\n    gl_Position = uMVP * vec4(aPosition, 1.0);\n\n}"};i.toString=i,t.exports=i},326:function(t,e,n){var i=function(t){var e="";return e+="#pragma SLOT version\n\n#pragma SLOT definitions\n\n#pragma SLOT precision\n\n"+n(74)()+"\n\n#pragma SLOT pf\n\nuniform float uTime;\nuniform float uSpeed;\nuniform float uScale;\nuniform float uDistortStrength;\nuniform float uIridescenceFactor;\nuniform vec4 uLogoBackgroundColor;\nuniform float uLogoOpacity;\n\nuniform sampler2D tVideo;\nuniform sampler2D tDisplacement;\nuniform sampler2D tMask;\nuniform sampler2D tRamp;\nuniform sampler2D tDots;\nuniform sampler2D tLogo;\nuniform sampler2D tLogoAlpha;\n\nIN vec2 vTexCoord0;\nIN vec2 vTexCoord1;\n\nfloat remap( in float x, in float a1, in float a2, in float b1, in float b2 ) {\n  return b1 + ( x - a1 ) * ( b2 - b1 ) / ( a2 - a1 );  \n}\n\nvec2 animateUV(vec2 uv, vec2 offset, vec2 scale, float speed) {\n  vec2 animatedOffset = offset * uTime * speed;\n  vec2 scaledUV = uv * scale;\n\n  return scaledUV + animatedOffset;\n}\n\nvec2 distortUV(vec2 uv, float displacement, float mask, float intensity) {\n  return uv + (remap(displacement, 0.0, 1.0, -intensity, intensity) * mask);\n}\n\nvoid main(void) {\n\n  #pragma SLOT f\n\n  vec2 uv2 = vTexCoord1;\n  uv2 -= vec2(0.5);\n  uv2 *= uScale;\n  uv2 += vec2(0.5);\n\n  float mask = texture2D(tMask, vTexCoord1).r;\n\n  vec2 dispUV = animateUV(vTexCoord0, vec2(2.0, 1.0), vec2(1.0, 1.5), uSpeed);\n  float displacement = texture2D(tDisplacement, dispUV).r;\n  vec2 uv = distortUV(uv2, displacement, mask, uDistortStrength);\n\n  vec3 video = texture2D(tVideo, uv).rgb;\n  vec3 logo = texture2D(tLogo, uv).rgb;\n  float logoAlpha = texture2D(tLogoAlpha, uv).r;\n  vec3 iridescent = texture2D(tRamp, vec2(displacement + (uTime * 0.15), 0.0)).rgb;\n  float iridescentMask = pow(mask, 1.5);\n\n  vec4 logoLayer = mix(uLogoBackgroundColor, vec4(logo, logoAlpha), logoAlpha);\n  vec3 color = mix(video, logoLayer.rgb, logoLayer.a * uLogoOpacity);\n  vec3 finalColor = mix(color, iridescent, iridescentMask * uIridescenceFactor);\n\n  FragColor = vec4(finalColor, 1.0);\n\n}\n"};i.toString=i,t.exports=i},327:function(t,e,n){var i=function(t){var e="";return e+="#pragma SLOT version\n\n#pragma SLOT definitions\n\n#pragma SLOT precision\n\n"+n(75)()+"\n\n#pragma SLOT pv\n\nIN vec3 aPosition;\n\nuniform mat4 uMVP;\n\nOUT vec2 vTexCoord0;\n\nvoid main(void) {\n\n    #pragma SLOT v\n\n    vTexCoord0 = aTexCoord0;\n\n    gl_Position = uMVP * vec4(aPosition, 1.0);\n\n}"};i.toString=i,t.exports=i},328:function(t,e,n){var i=function(t){var e="";return e+="#pragma SLOT version\n\n#pragma SLOT definitions\n\n#pragma SLOT precision\n\n"+n(74)()+"\n\n#pragma SLOT pf\n\nuniform float uTime;\nuniform float uSpeed;\nuniform vec3 uColor;\nuniform float uOpacity;\n\nuniform sampler2D tMain;\nuniform sampler2D tFalloff;\n\nIN vec2 vTexCoord0;\n\nvec2 animateUV(vec2 uv, vec2 offset, vec2 scale, float speed) {\n  vec2 animatedOffset = offset * uTime * speed;\n  vec2 scaledUV = uv * scale;\n\n  return scaledUV + animatedOffset;\n}\n\nvoid main(void) {\n\n  #pragma SLOT f\n\n  float falloff = texture2D(tFalloff, vTexCoord0).r;\n\n  vec2 uv = vec2(vTexCoord0.x, 1.0 - vTexCoord0.y);\n  float layer1 = texture2D(tMain, animateUV(uv, vec2(0.0, 0.1), vec2(0.1, 0.2), uSpeed)).r;\n  float layer2 = texture2D(tMain, animateUV(uv, vec2(0.2, 1.0), vec2(0.3, 0.5), uSpeed)).r;\n  float smoke = (layer1 * layer2 * 2.0) * falloff;\n\n  vec3 finalColor = mix(uColor, uColor + 0.5, falloff);\n  float alpha = smoke * uOpacity;\n\n  FragColor = vec4(finalColor, alpha);\n\n}\n"};i.toString=i,t.exports=i},329:function(t,e,n){var i=function(t){var e="";return e+="#pragma SLOT version\n\n#pragma SLOT definitions\n\n#pragma SLOT precision\n\n"+n(75)()+"\n\n#pragma SLOT pv\n\nIN vec3 aPosition;\n\nuniform mat4 uMVP;\n\nOUT vec2 vTexCoord0;\n\nvoid main(void) {\n\n    #pragma SLOT v\n\n    vTexCoord0 = aTexCoord0;\n\n    gl_Position = uMVP * vec4(aPosition, 1.0);\n\n}"};i.toString=i,t.exports=i},330:function(t,e,n){var i=function(t){var e="";return e+="#pragma SLOT version\n\n#pragma SLOT definitions\n\n#pragma SLOT precision\n\n"+n(74)()+"\n\n#pragma SLOT pf\n\nuniform float uTime;\nuniform float uSpeed;\nuniform vec3 uColor;\nuniform float uOpacity;\n\nuniform sampler2D tMain;\nuniform sampler2D tFalloff;\n\nIN vec2 vTexCoord0;\n\nvec2 animateUV(vec2 uv, vec2 offset, vec2 scale, float speed) {\n  vec2 animatedOffset = offset * uTime * speed;\n  vec2 scaledUV = uv * scale;\n\n  return scaledUV + animatedOffset;\n}\n\nvoid main(void) {\n\n  #pragma SLOT f\n\n  float falloff = texture2D(tFalloff, vTexCoord0).r;\n\n  vec2 uv = vec2(vTexCoord0.x, 1.0 - vTexCoord0.y);\n  float layer1 = texture2D(tMain, animateUV(uv, vec2(0.0, 0.5), vec2(1.5, 1.0), uSpeed)).r;\n  float layer2 = texture2D(tMain, animateUV(uv, vec2(0.5, 1.0), vec2(0.5, 1.0), uSpeed)).r;\n  float particles = (layer1 * layer2 * 2.0) * falloff;\n\n  vec3 finalColor = mix(uColor, vec3(1.0), falloff);\n\n  FragColor = vec4(finalColor, particles * uOpacity);\n\n}\n"};i.toString=i,t.exports=i},331:function(t,e,n){var i=function(t){var e="";return e+="#pragma SLOT version\n\n#pragma SLOT definitions\n\n\n#ifndef hasNormals\n  #define hasNormals 1\n#endif \n#ifndef hasTangents\n  #define hasTangents 0\n#endif \n\n#if hasTangents && !hasNormals \n  #pragma error tan but no nrm\n  error\n#endif\n\n#pragma SLOT precision\n\n"+n(75)()+"\n\n#pragma SLOT pv\n\n\nIN vec3 aPosition;\n#if hasNormals\nIN vec3 aNormal;\n#endif\n\n\nuniform mat4 uWorldMatrix;\nuniform mat4 uVP;\nuniform mat4 uViewMatrix;\nuniform mat3 uNormalMatrix;\nuniform float uVerticalSize;\nuniform vec3 uCameraPosition;\nuniform vec3 uClickPosition;\n\nstruct VertexData {\n  highp vec3 modelPosition;\n  highp vec3 position;\n  highp vec3 worldPos;\n  #if hasNormals\n    vec3 normal;\n  #endif\n  #if hasTangents\n    vec3 tangent;\n  #endif\n  mat4 worldMatrix;\n};\n\nOUT vec3 vNormal;\nOUT vec3 vViewPosition;\nOUT float vUnitY;\nOUT vec2 vTexCoord0;\nOUT vec3 vWorldPosition;\nOUT vec3 vClickWorldPosition;\n\nvoid InitVertexData( out VertexData vertex ) {\n\n  vertex.position = aPosition;\n  #if hasNormals\n    vertex.normal = aNormal;\n  #endif\n  #if hasTangents\n    vertex.tangent = vec3(0.0);\n  #endif\n\n  vertex.worldMatrix = uWorldMatrix;\n\n}\n\nvoid main( void ) {\n\n  #pragma SLOT v\n\n  VertexData vertex;\n  InitVertexData( vertex );\n\n  #pragma SLOT vertex_warp\n\n  vec4 worldPos = vertex.worldMatrix * vec4( vertex.position, 1.0 );\n  vertex.worldPos.xyz = worldPos.xyz / worldPos.w;\n\n  #pragma SLOT vertex_warp_world\n\n  vNormal = normalize( uNormalMatrix * vertex.normal );\n  vViewPosition = - (uViewMatrix * vec4(vertex.worldPos, 1.0)).xyz;\n  vUnitY = vertex.position.y / uVerticalSize;\n  vTexCoord0 = aTexCoord0;\n  vWorldPosition = vertex.worldPos;\n  vClickWorldPosition = (uWorldMatrix * vec4(uClickPosition, 1.0)).xyz;\n\n  gl_Position = uVP * vec4( vertex.worldPos, 1.0 );\n}"};i.toString=i,t.exports=i},332:function(t,e,n){var i=function(t){var e="";return e+="#pragma SLOT version\n\n#pragma SLOT definitions\n\n#pragma SLOT precision\n\n"+n(74)()+"\n\n#if __VERSION__ == 300\n  #define textureCube(a,b) texture( a, b )\n#endif\n\n#pragma SLOT pf\n\n#define PI 3.141592653589793\n\nIN vec3 vNormal;\nIN vec3 vViewPosition;\nIN float vUnitY;\nIN vec2 vTexCoord0;\nIN vec3 vReflect;\nIN vec3 vWorldPosition;\nIN vec3 vClickWorldPosition;\n\nuniform float uTime;\nuniform vec2 uResolution;\nuniform float uDotsFactor;\nuniform vec2 uMouseScreenPosition;\nuniform float uEnvRotation;\nuniform vec3 uCameraPosition;\nuniform vec3 uGlassColor;\nuniform mat4 uViewMatrix;\nuniform float uWaveRadius;\n\nuniform sampler2D tBackground;\nuniform sampler2D tMatCap;\nuniform sampler2D tDots;\nuniform sampler2D tDotsMasks;\nuniform samplerCube tEnvMap;\n\nvec2 matcap(vec3 viewDir, vec3 normal) {\n  vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n  vec3 y = cross( viewDir, x );\n  vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5; // 0.495 to remove artifacts caused by undersized matcap disks\n  uv.y *= -1.0;\n\n  return uv;\n}\n\nfloat remap( in float x, in float a1, in float a2, in float b1, in float b2 ) {\n  return b1 + ( x - a1 ) * ( b2 - b1 ) / ( a2 - a1 );  \n}\n\nvec2 remap( in vec2 x, in vec2 a1, in vec2 a2, in vec2 b1, in vec2 b2 ) {\n  return b1 + ( x - a1 ) * ( b2 - b1 ) / ( a2 - a1 );  \n}\n\n//\n// Description : Array and textureless GLSL 2D simplex noise function.\n//      Author : Ian McEwan, Ashima Arts.\n//  Maintainer : ijm\n//     Lastmod : 20110822 (ijm)\n//     License : Copyright (C) 2011 Ashima Arts. All rights reserved.\n//               Distributed under the MIT License. See LICENSE file.\n//               https://github.com/ashima/webgl-noise\n//\n\nvec3 mod289(vec3 x) {\n  return x - floor(x * (1.0 / 289.0)) * 289.0;\n}\n\nvec2 mod289(vec2 x) {\n  return x - floor(x * (1.0 / 289.0)) * 289.0;\n}\n\nvec3 permute(vec3 x) {\n  return mod289(((x*34.0)+1.0)*x);\n}\n\nfloat snoise(vec2 v)\n{\n  const vec4 C = vec4(0.211324865405187,\n                      0.366025403784439,\n                     -0.577350269189626,\n                      0.024390243902439);\n\n  vec2 i  = floor(v + dot(v, C.yy) );\n  vec2 x0 = v -   i + dot(i, C.xx);\n\n  vec2 i1;\n\n  i1 = (x0.x > x0.y) ? vec2(1.0, 0.0) : vec2(0.0, 1.0);\n\n  vec4 x12 = x0.xyxy + C.xxzz;\n  x12.xy -= i1;\n\n  i = mod289(i);\n  vec3 p = permute( permute( i.y + vec3(0.0, i1.y, 1.0 ))\n    + i.x + vec3(0.0, i1.x, 1.0 ));\n\n  vec3 m = max(0.5 - vec3(dot(x0,x0), dot(x12.xy,x12.xy), dot(x12.zw,x12.zw)), 0.0);\n  m = m*m ;\n  m = m*m ;\n\n  vec3 x = 2.0 * fract(p * C.www) - 1.0;\n  vec3 h = abs(x) - 0.5;\n  vec3 ox = floor(x + 0.5);\n  vec3 a0 = x - ox;\n\n  m *= 1.79284291400159 - 0.85373472095314 * ( a0*a0 + h*h );\n\n  vec3 g;\n  g.x  = a0.x  * x0.x  + h.x  * x0.y;\n  g.yz = a0.yz * x12.xz + h.yz * x12.yw;\n  return 130.0 * dot(m, g);\n}\n\nmat4 axisAngleRotation(vec3 axis, float angle) {\n    axis = normalize(axis);\n    float s = sin(angle);\n    float c = cos(angle);\n    float oc = 1.0 - c;\n    \n    return mat4(oc * axis.x * axis.x + c,           oc * axis.x * axis.y - axis.z * s,  oc * axis.z * axis.x + axis.y * s,  0.0,\n                oc * axis.x * axis.y + axis.z * s,  oc * axis.y * axis.y + c,           oc * axis.y * axis.z - axis.x * s,  0.0,\n                oc * axis.z * axis.x - axis.y * s,  oc * axis.y * axis.z + axis.x * s,  oc * axis.z * axis.z + c,           0.0,\n                0.0,                                0.0,                                0.0,                                1.0);\n}\n\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\n\nvec3 saturation(vec3 rgb, float factor) {\n  vec3 W = vec3(0.2125, 0.7154, 0.0721);\n  vec3 intensity = vec3(dot(rgb, W));\n\n  return mix(intensity, rgb, factor);\n}\n\nvec3 brightnessContrast(vec3 value, float brightness, float contrast) {\n  return (value - 0.5) * contrast + 0.5 + brightness;\n}\n\nvoid main( void ) {\n\n  #pragma SLOT f\n  \n  vec2 uv = gl_FragCoord.xy / uResolution;\n\n  float reflectionMask = 1.0 - dot(vNormal, vViewPosition) * 0.1;\n  reflectionMask = clamp(reflectionMask, 0.0, 1.0);\n\n  vec2 refractionUV = uv - (vec2(vNormal.x * 0.015, vNormal.y * 0.005));\n  vec3 refractedColor = texture2D(tBackground, refractionUV).rgb;\n\n  vec2 matcapUV = matcap(normalize(vViewPosition), normalize(vNormal));\n  vec3 matcapColor = texture2D(tMatCap, matcapUV).rgb;\n\n  vec3 cameraToFrag = normalize(vWorldPosition - uCameraPosition);\n  vec3 worldNormal = inverseTransformDirection(vNormal, uViewMatrix);\n  vec3 reflectVec = reflect(cameraToFrag, worldNormal);\n\n  vec3 yAxis = vec3(0.0, 1.0, 0.0);\n  vec3 dir = (axisAngleRotation(yAxis, uEnvRotation) * vec4(reflectVec, 1.0)).xyz;\n  vec3 envColor = textureCube(tEnvMap, vec3(dir.x, dir.yz)).rgb;\n\n  float opacityGradient = vUnitY;\n\n  float fresnel = dot(vNormal, normalize(uCameraPosition - vWorldPosition));\n  float fresnelBoost = fresnel * 0.05;\n\n  fresnel = remap(fresnel, 1.0, 0.0, 0.0, 0.75);\n  fresnel = smoothstep(0.3, 1.0, fresnel);\n  fresnel += fresnelBoost;\n\n  vec3 glassColor = mix(refractedColor, uGlassColor, clamp(opacityGradient * 1.75, 0.0, 1.0));\n\n  float highlights = clamp(remap(matcapColor.r, 0.0, 1.0, -1.0, 1.0), 0.0, 1.0) * 0.25;\n\n  vec3 color = mix(glassColor, envColor, fresnel) + highlights;\n\n  vec2 mousePos = remap(uMouseScreenPosition, vec2(-1.0), vec2(1.0), vec2(0.0), vec2(1.0)) * uResolution;\n  float radius = 0.075 * uResolution.x;\n  float mouseDistance = distance(gl_FragCoord.xy, mousePos);\n  float mouseMask = 1.0 - clamp(mouseDistance / radius, 0.0, 1.0);\n\n  float s = 1.1;\n  float scale1 = 5.524 * s;\n  float scale2 = scale1 * 25.0;\n\n  float dotsRandomId = texture2D(tDots, vTexCoord0 * vec2(scale1)).r;\n  float dotsSizeGradient = texture2D(tDotsMasks, vTexCoord0 * vec2(scale2)).r;\n\n  float dotsNoise1 = snoise(vec2(uTime * 0.25, dotsRandomId * 5.0));\n  float dotsNoise2 = snoise(vec2(uTime * 0.5, dotsRandomId * 10.0));\n\n  vec2 noiseUV = (gl_FragCoord.xy / uResolution) * 5.0;\n  noiseUV.y += uTime * 0.5;\n  float noiseMask = remap(snoise(noiseUV), -1.0, 1.0, 0.0, 1.0) * 0.3;\n\n  float dotsAnimatedId = remap(sin(dotsNoise1 * PI * 2.0), -1.0, 1.0, 0.1, 0.8);\n  float dotsAnimatedSize = 1.0 - smoothstep(dotsAnimatedId - 0.05, dotsAnimatedId + 0.05, 1.0 - dotsSizeGradient);\n  float dotsMask = pow(1.0 - reflectionMask, 3.0);\n  float dotsLuminance = (dotsAnimatedSize * remap(dotsNoise1, -1.0, 1.0, 0.0, 1.0)) * dotsMask;\n\n  float dots = dotsLuminance * (noiseMask + mouseMask * 0.75) * uDotsFactor;\n  dots += dots * dotsNoise2 * 0.35;\n\n  color += dots;\n\n  float distanceToClick = distance(vClickWorldPosition, vWorldPosition);\n  float waveProgress = remap(distanceToClick, 0.0, uWaveRadius, 0.0, PI);\n  float waveMask = clamp(sin(clamp(distanceToClick - uWaveRadius + 2.0, 0.0, PI)), 0.0, 1.0);\n  \n  color += color * waveMask * 0.5;\n\n  color = brightnessContrast(color, -0.025, 1.1);\n  color = saturation(color, 1.1);\n\n  FragColor = vec4(color, 1.0);\n\n}"};i.toString=i,t.exports=i},333:function(t,e,n){var i=function(t){var e="";return e+="#pragma SLOT version\n\n#pragma SLOT definitions\n\n\n#ifndef hasNormals\n  #define hasNormals 1\n#endif \n#ifndef hasTangents\n  #define hasTangents 0\n#endif \n\n#if hasTangents && !hasNormals \n  #pragma error tan but no nrm\n  error\n#endif\n\n#pragma SLOT precision\n\n"+n(75)()+"\n\n#pragma SLOT pv\n\n\nIN vec3 aPosition;\n#if hasNormals\nIN vec3 aNormal;\n#endif\n\n\nuniform mat4 uWorldMatrix;\nuniform mat4 uVP;\nuniform mat4 uViewMatrix;\nuniform mat3 uNormalMatrix;\nuniform float uVerticalSize;\n\nstruct VertexData {\n  highp vec3 modelPosition;\n  highp vec3 position;\n  highp vec3 worldPos;\n  #if hasNormals\n    vec3 normal;\n  #endif\n  #if hasTangents\n    vec3 tangent;\n  #endif\n  mat4 worldMatrix;\n};\n\nOUT vec3 vNormal;\nOUT vec3 vViewPosition;\nOUT float vUnitY;\n\nvoid InitVertexData( out VertexData vertex ) {\n\n  vertex.position = aPosition;\n  #if hasNormals\n    vertex.normal = aNormal;\n  #endif\n  #if hasTangents\n    vertex.tangent = vec3(0.0);\n  #endif\n\n  vertex.worldMatrix = uWorldMatrix;\n   \n}\n\nvoid main( void ) {\n\n  #pragma SLOT v\n\n  VertexData vertex;\n  InitVertexData( vertex );\n\n  #pragma SLOT vertex_warp\n\n  vec4 worldPos = vertex.worldMatrix * vec4( vertex.position, 1.0 );\n  vertex.worldPos.xyz = worldPos.xyz / worldPos.w;\n\n  #pragma SLOT vertex_warp_world\n\n  vNormal = normalize( uNormalMatrix * vertex.normal );\n  vViewPosition = - (uViewMatrix * vec4(vertex.worldPos, 1.0)).xyz;\n  vUnitY = (vertex.position.y + (uVerticalSize * 0.5)) / uVerticalSize;\n\n  gl_Position = uVP * vec4( vertex.worldPos, 1.0 );\n}"};i.toString=i,t.exports=i},334:function(t,e,n){var i=function(t){var e="";return e+="#pragma SLOT version\n\n#pragma SLOT definitions\n\n#pragma SLOT precision\n\n"+n(74)()+"\n\n#pragma SLOT pf\n\nIN vec3 vNormal;\nIN vec3 vViewPosition;\nIN float vUnitY;\n\nuniform sampler2D uMatCap;\nuniform sampler2D uColorRamp;\n\nvec2 matcap(vec3 viewDir, vec3 normal) {\n  vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n  vec3 y = cross( viewDir, x );\n  vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5; // 0.495 to remove artifacts caused by undersized matcap disks\n  uv.y *= -1.0;\n\n  return uv;\n}\n\nvoid main( void ) {\n\n  #pragma SLOT f\n\n  vec2 matcapUV = matcap(normalize(vViewPosition), normalize(vNormal));\n  vec3 matcapColor = texture2D(uMatCap, matcapUV).rgb;\n\n  float verticalGradient = 1.0 - vUnitY;\n  vec3 gradientColor = texture2D(uColorRamp, vec2(verticalGradient, 0.0)).rgb;\n\n\n  vec3 finalColor = matcapColor * gradientColor;\n\n  FragColor = vec4(finalColor, clamp(matcapColor.r + 0.2, 0.0, 1.0));\n\n}"};i.toString=i,t.exports=i},335:function(t,e,n){var i=function(t){var e="";return e+="#pragma SLOT version\n\n#pragma SLOT definitions\n\n\n#ifndef hasNormals\n  #define hasNormals 1\n#endif \n#ifndef hasTangents\n  #define hasTangents 0\n#endif \n\n#if hasTangents && !hasNormals \n  #pragma error tan but no nrm\n  error\n#endif\n\n#pragma SLOT precision\n\n"+n(75)()+"\n\n#pragma SLOT pv\n\n\nIN vec3 aPosition;\nIN vec2 aTexCoord0;\n#if hasNormals\nIN vec3 aNormal;\n#endif\n\n\nuniform mat4 uWorldMatrix;\nuniform mat4 uVP;\nuniform mat4 uViewMatrix;\nuniform mat3 uNormalMatrix;\n\nstruct VertexData {\n  highp vec3 modelPosition;\n  highp vec3 position;\n  highp vec3 worldPos;\n  #if hasNormals\n    vec3 normal;\n  #endif\n  #if hasTangents\n    vec3 tangent;\n  #endif\n  mat4 worldMatrix;\n};\n\nOUT vec2 vTexCoord0;\nOUT vec3 vNormal;\nOUT vec3 vViewPosition;\n\nvoid InitVertexData( out VertexData vertex ) {\n\n  vertex.position = aPosition;\n  #if hasNormals\n    vertex.normal = aNormal;\n  #endif\n  #if hasTangents\n    vertex.tangent = vec3(0.0);\n  #endif\n\n  vertex.worldMatrix = uWorldMatrix;\n   \n}\n\nvoid main( void ) {\n\n  #pragma SLOT v\n\n  VertexData vertex;\n  InitVertexData( vertex );\n\n  #pragma SLOT vertex_warp\n\n  vec4 worldPos = vertex.worldMatrix * vec4( vertex.position, 1.0 );\n  vertex.worldPos.xyz = worldPos.xyz / worldPos.w;\n\n  #pragma SLOT vertex_warp_world\n\n  vTexCoord0 = aTexCoord0;\n  vNormal = normalize( uNormalMatrix * vertex.normal );\n  vViewPosition = - (uViewMatrix * vec4(vertex.worldPos, 1.0)).xyz;\n\n  gl_Position = uVP * vec4( vertex.worldPos, 1.0 );\n}"};i.toString=i,t.exports=i},336:function(t,e,n){var i=function(t){var e="";return e+="#pragma SLOT version\n\n#pragma SLOT definitions\n\n#if __VERSION__ != 300\n  #extension GL_OES_standard_derivatives : enable\n#endif\n\n#pragma SLOT precision\n\n"+n(74)()+"\n\n#pragma SLOT pf\n\nIN vec2 vTexCoord0;\nIN vec3 vNormal;\nIN vec3 vViewPosition;\n\nuniform sampler2D uMatCap;\nuniform sampler2D uAlphaMap;\nuniform sampler2D uNormalMap;\nuniform sampler2D uAOMap;\n\nuniform float uAOIntensity;\nuniform float uNormalIntensity;\n\nvec2 matcap(vec3 viewDir, vec3 normal) {\n  vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n  vec3 y = cross( viewDir, x );\n  vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5; // 0.495 to remove artifacts caused by undersized matcap disks\n  uv.y *= -1.0;\n\n  return uv;\n}\n\n// Per-Pixel Tangent Space Normal Mapping\nvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN ) {\n  vec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );\n  vec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );\n  vec2 st0 = dFdx( vTexCoord0.st );\n  vec2 st1 = dFdy( vTexCoord0.st );\n  float scale = sign( st1.t * st0.s - st0.t * st1.s );\n  vec3 S = normalize( ( q0 * st1.t - q1 * st0.t ) * scale );\n  vec3 T = normalize( ( - q0 * st1.s + q1 * st0.s ) * scale );\n  vec3 N = normalize( surf_norm );\n  mat3 tsn = mat3( S, T, N );\n  mapN.xy *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\n  return normalize( tsn * mapN );\n}\n\nvoid main( void ) {\n\n  #pragma SLOT f\n\n  vec3 normal = normalize(vNormal);\n\n  #ifdef HAS_normalMap\n    vec3 mapN = texture2D(uNormalMap, vTexCoord0).xyz * 2.0 - 1.0;\n    mapN.xy *= uNormalIntensity;\n\n    normal = perturbNormal2Arb(-vViewPosition, normal, mapN);\n  #endif\n\n  vec2 matcapUV = matcap(normalize(vViewPosition), normal);\n  vec3 matcapColor = texture2D(uMatCap, matcapUV).rgb;\n\n  vec3 finalColor = matcapColor;\n\n  #ifdef HAS_alphaMap\n    float alpha = texture2D(uAlphaMap, vTexCoord0).r;\n  #else\n    float alpha = 1.0;\n  #endif\n\n  #ifdef HAS_aoMap\n    float ao = texture2D(uAOMap, vTexCoord0).r;\n    finalColor *= clamp(ao + (1.0 - clamp(uAOIntensity, 0.0, 1.0)), 0.0, 1.0);\n  #endif\n\n  FragColor = vec4(finalColor, alpha);\n\n}"};i.toString=i,t.exports=i},337:function(t,e,n){var i=function(t){var e="";return e+="#pragma SLOT version\n\n#pragma SLOT definitions\n\n\n#ifndef hasNormals\n  #define hasNormals 1\n#endif \n#ifndef hasTangents\n  #define hasTangents 0\n#endif \n\n#if hasTangents && !hasNormals \n  #pragma error tan but no nrm\n  error\n#endif\n\n#pragma SLOT precision\n\n"+n(75)()+"\n\n#pragma SLOT pv\n\nIN vec3 aPosition;\n\nOUT vec2 vTexCoord0;\n\nuniform mat4 uMVP;\n\nvoid main(void) {\n\n    vTexCoord0 = aTexCoord0;\n\n    gl_Position = uMVP * vec4(aPosition, 1.0);\n\n}"};i.toString=i,t.exports=i},338:function(t,e,n){var i=function(t){var e="";return e+="#pragma SLOT version\n\n#pragma SLOT definitions\n\n#pragma SLOT precision\n\n"+n(74)()+"\n\n#if __VERSION__ == 300\n  #define textureCube(a,b) texture( a, b )\n#endif\n\n#pragma SLOT pf\n\nIN vec2 vTexCoord0;\n\nuniform sampler2D tMain;\nuniform vec3 uColor;\n\nvoid main(void) {\n\n  vec3 texel = texture2D(tMain, vTexCoord0).rgb;\n\n  FragColor = vec4(texel * uColor, 1.0);\n\n}\n"};i.toString=i,t.exports=i},339:function(t,e,n){var i=function(t){var e="";return e+="\n"+n(75)()+"\n\nIN vec4 aPosition;\nIN vec4 aDirection;\nIN vec4 aAxisA;\nIN vec4 aAxisB;\n\nOUT vec3 vLineTc;\n\nuniform mat4 uMVP;\nuniform mat4 uModelView;\nuniform mat4 uProjection;\nuniform vec2 uCycle; // cos/sin\n\nconst vec3 UP = vec3(0.0, 1.0, 0.0 );\n\n#define Position aPosition.xyz\n#define Direction aDirection.xyz\n#define AxisA aAxisA.xyz\n#define AxisB aAxisB.xyz\n\n#define SideX aPosition.w\n#define SideY aDirection.w\n#define SideZ aAxisA.w\n\n#define Phase aAxisB.w\n\n#define Thickness 2.0\n\nvoid main( void ){\n\n    // highp float rndLength = length( aRandomDir );\n    \n    vec3 pos = Position + (AxisA * uCycle.x + AxisB* uCycle.y);\n\n    vec3 wPos = (uModelView * vec4( pos, 1.0 )).xyz;\n    vec3 wDir = (uModelView * vec4( Direction, 0.0 )).xyz;\n\n    // widen line\n    vec3 deltaX = normalize( cross( wPos, wDir ) );\n\n    // line ends\n    vec3 deltaY = normalize( cross( deltaX, wPos ) );\n\n    wPos += deltaX * (Thickness*SideX);\n    wPos += deltaY * (Thickness*SideY);\n\n\n    gl_Position = uProjection * vec4( wPos, 1.0 );\n    // gl_Position = uMVP * vec4( pos, 1.0 );\n\n    // assume camera is at world origin\n\n    vLineTc = vec3( SideX * 0.5 + 0.5, 1.0-abs(SideY), SideZ + Direction.x*10.0 );\n\n}"};i.toString=i,t.exports=i},340:function(t,e,n){var i=function(t){var e="";return e+="precision mediump float;\n\n\n"+n(74)()+"\n\n\nuniform vec3 uColor;\nuniform sampler2D tRay;\nuniform float uTime;\n\nIN vec3 vLineTc;\n\nvoid main( void ){\n    vec3 tex = texture2D( tRay, vLineTc.xy ).rgb;\n    tex *= 1.0 + \n        .4* sin( vLineTc.z*10.0 + uTime ) +\n        .4* cos( vLineTc.z*7.0 - uTime );\n    FragColor = vec4( tex*uColor, 1.0 );\n}"};i.toString=i,t.exports=i},341:function(t,e,n){var i=function(t){var e="";return e+="precision highp float;\n\n"+n(75)()+"\n\nIN vec3 aPosition;\nIN vec2 aTexCoord0;\n\nOUT vec2 vTexCoord;\n\nuniform mat4 uMVP;\n\nvoid main(void)\n{\n  vTexCoord = aTexCoord0;\n  gl_Position = uMVP * vec4( aPosition, 1.0 );\n}\n"};i.toString=i,t.exports=i},342:function(t,e,n){var i=function(t){var e="";return e+="precision mediump float;\n\n"+n(74)()+"\n\n\nIN vec2 vTexCoord;\n\nuniform sampler2D uInput;\n\nvoid main( void ){\n    FragColor = texture2D(uInput, vTexCoord );\n}"};i.toString=i,t.exports=i},343:function(t,e,n){var i=function(t){var e="";return e+="\n"+n(75)()+"\n\nIN vec4 aPosition;\nIN vec4 aAxisA;\nIN vec4 aAxisB;\n\nOUT float vLum;\n\nuniform mat4 uMVP;\nuniform mat4 uModelView;\nuniform mat4 uProjection;\nuniform vec2 uCycle; // cos/sin\nuniform float uTime;\n\n#define Position aPosition.xyz\n#define AxisA aAxisA.xyz\n#define AxisB aAxisB.xyz\n\n#define Phase aAxisB.w\n\n\nvoid main( void ){\n\n    vLum = clamp( sin( uTime + Phase ), 0.0, 1.0 );\n    vec3 pos = Position + (AxisA * uCycle.x + AxisB* uCycle.y);\n    gl_Position = uMVP * vec4( pos, 1.0 );\n\n}"};i.toString=i,t.exports=i},344:function(t,e,n){var i=function(t){var e="";return e+="precision mediump float;\n\n\n"+n(74)()+"\n\nuniform vec3 uColor;\nIN float vLum;\n\nvoid main( void ){\n    \n    FragColor = vec4( uColor * vLum, 1.0 );\n}"};i.toString=i,t.exports=i},354:function(t,e,n){t.exports=n.p+"assets/img/logo-the-anrcade-88e98b19.png"},355:function(t,e,n){t.exports=n.p+"assets/img/poster-hub-rule1-c33f1562.jpg"},356:function(t,e,n){t.exports=n.p+"assets/img/poster-hub-rule2-07892319.jpg"},357:function(t,e,n){t.exports=n.p+"assets/img/poster-hub-rule3-41b3be3b.jpg"},358:function(t,e,n){t.exports=n.p+"assets/img/radar-8b90db23.png"},359:function(t,e,n){"use strict";var i=n(270);n.n(i).a},360:function(t,e,n){(t.exports=n(10)(!1)).push([t.i,'.c-Hubpanel-inner h1 {\n  font-family: "OptimaLTStd", \'serif\';\n}\n.el-gr .c-Hubpanel-inner h1 {\n  font-family: "OptimaELText", \'serif\';\n}\n.pl-pl .c-Hubpanel-inner h1 {\n  font-family: "OptimaELText", \'serif\';\n}\n.ru-ru .c-Hubpanel-inner h1 {\n  font-family: "OptimaELText", \'serif\';\n}\n.tr-tr .c-Hubpanel-inner h1 {\n  font-family: "OptimaNovaLTPro-Light", \'sans-serif\';\n}\n.zh-cn .c-Hubpanel-inner h1 {\n  font-family: "OptimaLTStd", "Microsoft YaHei", "Microsoft JhengHei", "Hiragino Sans GB", "STHeiti", "sans-serif", "Tahoma", "arial";\n}\n.c-Hubpanel {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  overflow: hidden;\n  visibility: hidden;\n  transition: visibility 0.6s cubic-bezier(0.165, 0.84, 0.44, 1);\n  user-select: none;\n  -webkit-user-select: none;\n}\n.c-Hubpanel.is-hidden {\n  display: none;\n}\n.c-Hubpanel.is-hubpanel-active {\n  visibility: visible;\n  transition: visibility 0.8s cubic-bezier(0.165, 0.84, 0.44, 1);\n}\n.c-Hubpanel-bg {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  opacity: 0;\n  transform: translateZ(0);\n  transition: opacity 0.6s cubic-bezier(0.165, 0.84, 0.44, 1);\n}\n.is-hubpanel-active .c-Hubpanel-bg {\n  opacity: 1;\n  transition: opacity 0.8s cubic-bezier(0.165, 0.84, 0.44, 1);\n}\n.c-Hubpanel-bg-img {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n}\n.c-Hubpanel-inner {\n  position: relative;\n  text-align: center;\n  width: 71.42857142857143%;\n  margin: 0 auto;\n}\n.c-Hubpanel-inner h1 {\n  font-weight: normal;\n  opacity: 0;\n  transform: translateY(30px) translateZ(0);\n  transition: transform 0s cubic-bezier(0.165, 0.84, 0.44, 1) 0s, opacity 0s cubic-bezier(0.165, 0.84, 0.44, 1);\n}\n.is-hubpanel-active .c-Hubpanel-inner h1 {\n  opacity: 1;\n  transform: translateZ(0);\n  transition: transform 0.8s cubic-bezier(0.165, 0.84, 0.44, 1), opacity 0.8s cubic-bezier(0.165, 0.84, 0.44, 1);\n}\n@media screen and (min-width: 768px) {\n.c-Hubpanel-inner {\n    width: 57.142857142857146%;\n}\n}\n@media screen and (min-width: 1024px) {\n.c-Hubpanel-inner {\n    width: 35.714285714285715%;\n}\n}\n.c-Hubpanel-inner-logo {\n  width: 100%;\n  opacity: 0;\n  transform: translateY(30px) translateZ(0);\n  transition: transform 0s cubic-bezier(0.165, 0.84, 0.44, 1) 0.6s, opacity 0.6s cubic-bezier(0.165, 0.84, 0.44, 1);\n}\n.is-hubpanel-active .c-Hubpanel-inner-logo {\n  opacity: 1;\n  transform: translateZ(0);\n  transition: transform 0.8s cubic-bezier(0.165, 0.84, 0.44, 1), opacity 0.8s cubic-bezier(0.165, 0.84, 0.44, 1);\n}\n.c-Hubpanel-btn {\n  position: relative;\n  margin-top: 45px;\n  border: 1px solid rgba(255,255,255,0.2);\n  border-radius: 24px;\n  opacity: 0;\n  transform: translateY(30px) translateZ(0);\n  transition: transform 0s cubic-bezier(0.165, 0.84, 0.44, 1) 0.6s, opacity 0.6s cubic-bezier(0.165, 0.84, 0.44, 1);\n}\n@media screen and (min-width: 768px) {\n.c-Hubpanel-btn {\n    margin-top: 40px;\n}\n}\n.is-hubpanel-active .c-Hubpanel-btn {\n  opacity: 1;\n  transform: translateZ(0);\n  transition: transform 0.8s cubic-bezier(0.165, 0.84, 0.44, 1) 0.2s, opacity 0.8s cubic-bezier(0.165, 0.84, 0.44, 1) 0.2s;\n}\n.c-Hubpanel-btn.is-loaded:after {\n  opacity: 1;\n}\n@media screen and (min-width: 1024px) {\n.c-Hubpanel-btn.is-loaded:after {\n    opacity: 0;\n}\n}\n@media screen and (min-width: 1024px) {\n.c-Hubpanel-btn.is-loaded:hover:after {\n    opacity: 1;\n    transform: scaleX(1.05) translateZ(0);\n}\n}\n@media screen and (min-width: 1024px) {\n.c-Hubpanel-btn.is-loaded:hover .c-Hubpanel-btn-content {\n    transform: scaleX(1.05) translateZ(0);\n}\n}\n.c-Hubpanel-btn:after {\n  content: "";\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  z-index: -1;\n  box-shadow: 0px 0px 13px 0px #fff;\n  border-radius: 24px;\n  opacity: 0;\n  transform: translateZ(0);\n  transition: transform 0.8s cubic-bezier(0.165, 0.84, 0.44, 1), opacity 0.8s cubic-bezier(0.165, 0.84, 0.44, 1);\n}\n.c-Hubpanel-btn-svg {\n  display: block;\n  stroke-dasharray: 343;\n  stroke-dashoffset: 343;\n  transform: translateZ(0);\n}\n.c-Hubpanel-btn-content {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  position: absolute;\n  overflow: hidden;\n  transform: translateZ(0);\n  transition: transform 0.8s cubic-bezier(0.165, 0.84, 0.44, 1);\n  border-radius: 24px;\n}\n.is-loaded .c-Hubpanel-btn-content:before {\n  transform: translateY(-25%) translateZ(0);\n}\n.c-Hubpanel-btn-content:before {\n  content: "";\n  position: absolute;\n  top: 0%;\n  left: -25%;\n  width: 150%;\n  height: 150%;\n  border-top-left-radius: 50%;\n  border-top-right-radius: 50%;\n  background: #fff;\n  transform: translateY(75%) translateZ(0);\n  transition: transform 0.8s cubic-bezier(0.165, 0.84, 0.44, 1);\n}\n.c-Hubpanel-btn-content-progress {\n  opacity: 1;\n  transform: translateY(0px) translateZ(0);\n  transition: transform 0.8s cubic-bezier(0.165, 0.84, 0.44, 1), opacity 0.8s cubic-bezier(0.165, 0.84, 0.44, 1);\n}\n.is-loaded .c-Hubpanel-btn-content-progress {\n  opacity: 0;\n  transform: translateY(-10px) translateZ(0);\n}\n.c-Hubpanel-btn-content-start {\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  color: #17233a;\n  opacity: 0;\n  transform: translate(-50%, -50%) translateY(10px) translateZ(0);\n  transition: transform 0.8s cubic-bezier(0.165, 0.84, 0.44, 1), opacity 0.8s cubic-bezier(0.165, 0.84, 0.44, 1);\n}\n.is-loaded .c-Hubpanel-btn-content-start {\n  opacity: 1;\n  transform: translate(-50%, -50%) translateZ(0);\n}\n',""])},361:function(t,e,n){"use strict";var i=n(271);n.n(i).a},362:function(t,e,n){(t.exports=n(10)(!1)).push([t.i,".c-HubNavigation {\n  position: relative;\n  width: 268px;\n  height: 110px;\n  pointer-events: auto;\n  z-index: 0;\n}\n.c-HubNavigation-list {\n  position: relative;\n  width: 100%;\n  height: 100%;\n}\n.c-HubNavigation-list-item {\n  position: absolute;\n  opacity: 1;\n  transform: translate3d(0, 0, 0);\n}\n.c-HubNavigation-list-item:nth-child(1) {\n  bottom: 0;\n  left: 0;\n}\n.c-HubNavigation-list-item:nth-child(2) {\n  top: 12px;\n  left: 47px;\n}\n.c-HubNavigation-list-item:nth-child(3) {\n  top: 0;\n  left: 106px;\n}\n.c-HubNavigation-list-item:nth-child(4) {\n  top: 12px;\n  right: 47px;\n}\n.c-HubNavigation-list-item:nth-child(5) {\n  right: 0;\n  bottom: 0;\n}\n.c-HubNavigation-list-thumbnail {\n  width: 82%;\n  height: 82%;\n}\n.c-HubNavigation-list .t-btn--game {\n  width: 56px;\n  height: 56px;\n}\n.c-HubNavigation-list .t-btn--game:before {\n  width: 82%;\n  height: 82%;\n}\n.c-HubNavigation-list .t-btn--game:after {\n  opacity: 0;\n  border: 2px solid #fff;\n  transition: transform 0.8s cubic-bezier(0.165, 0.84, 0.44, 1), opacity 0.2s;\n}\n.c-HubNavigation-list .t-btn--game.is-default:before {\n  background-color: #fff;\n}\n.c-HubNavigation-list .t-btn--game.is-default .ui-icon {\n  position: relative;\n  z-index: 1;\n}\n.c-HubNavigation-list .t-btn--game.is-active:after {\n  opacity: 1;\n  transform: scale(1) translateZ(0);\n}\n.c-HubNavigation-indicator {\n  position: absolute;\n  left: calc(50% - 5px);\n  bottom: 2px;\n  width: 10px;\n  height: 10px;\n  border-radius: 50%;\n  background-color: #fff;\n  box-shadow: 0 0 20px 4px rgba(255,255,255,0.7);\n  transition: transform 0.2s cubic-bezier(0.165, 0.84, 0.44, 1);\n}\n.c-HubNavigation-indicator-gradient {\n  position: absolute;\n  bottom: 5px;\n  left: -21px;\n  width: 52px;\n  height: 49px;\n}\n",""])},363:function(t,e,n){"use strict";var i=n(272);n.n(i).a},364:function(t,e,n){(t.exports=n(10)(!1)).push([t.i,'.c-Hub-list-title,\n.c-Hub-bottle-content b {\n  font-family: "AkzidenzGrotesk-Regular", "Arial", \'sans-serif\';\n}\n.tr-tr .c-Hub-list-title,\n.tr-tr .c-Hub-bottle-content b {\n  font-family: "AkzidenzGrotesk-Regular", "Arial", \'sans-serif\';\n}\n.zh-cn .c-Hub-list-title,\n.zh-cn .c-Hub-bottle-content b {\n  font-family: "AkzidenzGrotesk-Regular", "Microsoft YaHei", "Microsoft JhengHei", "Hiragino Sans GB", "STHeiti", "sans-serif", "Tahoma", "arial";\n}\n.c-Hub-list-name,\n.c-Hub-bottle-content {\n  font-family: "OptimaLTStd", \'serif\';\n}\n.el-gr .c-Hub-list-name,\n.el-gr .c-Hub-bottle-content {\n  font-family: "OptimaELText", \'serif\';\n}\n.pl-pl .c-Hub-list-name,\n.pl-pl .c-Hub-bottle-content {\n  font-family: "OptimaELText", \'serif\';\n}\n.ru-ru .c-Hub-list-name,\n.ru-ru .c-Hub-bottle-content {\n  font-family: "OptimaELText", \'serif\';\n}\n.tr-tr .c-Hub-list-name,\n.tr-tr .c-Hub-bottle-content {\n  font-family: "OptimaNovaLTPro-Light", \'sans-serif\';\n}\n.zh-cn .c-Hub-list-name,\n.zh-cn .c-Hub-bottle-content {\n  font-family: "OptimaLTStd", "Microsoft YaHei", "Microsoft JhengHei", "Hiragino Sans GB", "STHeiti", "sans-serif", "Tahoma", "arial";\n}\n.c-Hub {\n  position: absolute;\n  top: 0;\n  right: 0;\n  bottom: 0;\n  left: 0;\n  display: flex;\n  flex-direction: column;\n  justify-content: flex-end;\n  align-items: center;\n  padding-bottom: 35px;\n  overflow: hidden;\n  user-select: none;\n}\n.c-Hub:before {\n  content: \'\';\n  position: absolute;\n  top: -37%;\n  right: 0;\n  bottom: -3%;\n  left: 0;\n  opacity: 0.8;\n  background-position: bottom;\n  background-size: cover;\n  background-repeat: no-repeat;\n  background-image: radial-gradient(106% 50%, rgba(0,0,0,0) 35%, rgba(0,0,0,0) 63%, #000 100%);\n  opacity: 0;\n}\n.is-hub-loaded .c-Hub:before {\n  opacity: 1;\n}\n.c-Hub-cursor {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  cursor: none;\n}\n.is-cursor-pointer .c-Hub-cursor {\n  cursor: pointer;\n}\n.c-Hub-list {\n  position: relative;\n  width: 100%;\n  margin-bottom: 35px;\n  visibility: hidden;\n  opacity: 0;\n  transition: opacity 0.4s cubic-bezier(0.165, 0.84, 0.44, 1), visibility 0s linear 0.4s;\n  pointer-events: none;\n  width: 71.42857142857143%;\n}\n@media screen and (min-width: 1024px) {\n.c-Hub-list {\n    margin-bottom: 55px;\n    width: 42.85714285714286%;\n}\n}\n.is-navigation-active .c-Hub-list {\n  visibility: visible;\n  opacity: 1;\n  transition: opacity 0.4s cubic-bezier(0.165, 0.84, 0.44, 1), visibility 0s linear;\n}\n.c-Hub-list-item {\n  position: absolute;\n  left: 0;\n  bottom: 0;\n  width: 100%;\n  text-align: center;\n  visibility: hidden;\n  pointer-events: auto;\n  transition: visibility 0s linear 0.4s;\n}\n.c-Hub-list-item.is-active {\n  visibility: visible;\n  transition: visibility 0.8s cubic-bezier(0.165, 0.84, 0.44, 1) 0.4s;\n}\n.c-Hub-list-title {\n  font-size: 11px;\n  font-size: 0.6875rem;\n  letter-spacing: 2.11px;\n  text-transform: uppercase;\n  opacity: 0;\n  transform: translate3d(0, 20px, 0);\n  transition: transform 0s linear 0.4s, opacity 0.4s cubic-bezier(0.165, 0.84, 0.44, 1);\n}\n.is-navigation-active .is-active .c-Hub-list-title {\n  opacity: 1;\n  transform: translate3d(0, 0, 0);\n  transition: transform 0.8s cubic-bezier(0.165, 0.84, 0.44, 1) 0.4s, opacity 0.8s cubic-bezier(0.165, 0.84, 0.44, 1) 0.4s;\n}\n.c-Hub-list-name {\n  margin-top: 9px;\n  font-size: 26px;\n  font-size: 1.625rem;\n  letter-spacing: 1.08px;\n  text-transform: uppercase;\n  opacity: 0;\n  transform: translate3d(0, 30px, 0);\n  transition: transform 0s linear 0.4s, opacity 0.4s cubic-bezier(0.165, 0.84, 0.44, 1);\n}\n.is-navigation-active .is-active .c-Hub-list-name {\n  opacity: 1;\n  transform: translate3d(0, 0, 0);\n  transition: transform 0.8s cubic-bezier(0.165, 0.84, 0.44, 1) 0.4s, opacity 0.8s cubic-bezier(0.165, 0.84, 0.44, 1) 0.4s;\n}\n@media screen and (min-width: 1024px) {\n.c-Hub-list-name {\n    margin-top: 11px;\n    font-size: 42px;\n    font-size: 2.625rem;\n    letter-spacing: 1.75px;\n}\n}\n.c-Hub-list-btn {\n  display: inline-block;\n  margin-top: 11px;\n  pointer-events: auto;\n  opacity: 0;\n  transform: translate3d(0, 30px, 0);\n  transition: transform 0s linear 0.4s, opacity 0.4s cubic-bezier(0.165, 0.84, 0.44, 1);\n}\n.is-navigation-active .is-active .c-Hub-list-btn {\n  opacity: 1;\n  transform: translate3d(0, 0, 0);\n  transition: transform 0.8s cubic-bezier(0.165, 0.84, 0.44, 1) 0.5s, opacity 0.8s cubic-bezier(0.165, 0.84, 0.44, 1) 0.5s;\n}\n@media screen and (min-width: 1024px) {\n.c-Hub-list-btn {\n    margin-top: 13px;\n}\n}\n.c-Hub-navigation {\n  visibility: hidden;\n  opacity: 0;\n  transform: translate3d(0, 30px, 0);\n  transition: transform 0s linear 0.4s, opacity 0.4s cubic-bezier(0.165, 0.84, 0.44, 1), visibility 0s linear 0.4s;\n}\n.is-navigation-active .c-Hub-navigation {\n  visibility: visible;\n  opacity: 1;\n  transform: translate3d(0, 0, 0);\n  transition: transform 0.8s cubic-bezier(0.165, 0.84, 0.44, 1) 0.6s, opacity 0.8s cubic-bezier(0.165, 0.84, 0.44, 1) 0.6s;\n}\n.c-Hub-tap {\n  position: absolute;\n  top: 0;\n  left: 0;\n  opacity: 0;\n  visibility: hidden;\n  transition: opacity 0.4s cubic-bezier(0.165, 0.84, 0.44, 1), visibility 0s linear 0.4s;\n  margin-top: -28px;\n  margin-left: -28px;\n}\n.is-navigation-active .c-Hub-tap.is-active {\n  pointer-events: auto;\n  opacity: 1;\n  visibility: visible;\n  transition: opacity 0.4s cubic-bezier(0.165, 0.84, 0.44, 1), visibility 0s linear;\n}\n.c-Hub-bottle {\n  position: absolute;\n  top: 0;\n  right: 0;\n  width: 100%;\n  height: 100%;\n  padding: 45px 30px;\n  display: flex;\n  flex-direction: column;\n  justify-content: flex-end;\n  align-items: center;\n  visibility: visible;\n  transition: visibility 0.8s cubic-bezier(0.165, 0.84, 0.44, 1) 0.4s;\n}\n.is-navigation-active .c-Hub-bottle {\n  visibility: hidden;\n  transition: visibility 0.4s cubic-bezier(0.165, 0.84, 0.44, 1);\n}\n@media screen and (min-width: 1024px) {\n.c-Hub-bottle {\n    width: 50%;\n    justify-content: center;\n    align-items: flex-start;\n    padding: 0 8vw;\n}\n}\n.c-Hub-bottle-interactive {\n  position: absolute;\n  top: 0;\n  right: 0;\n  bottom: 0;\n  left: 0;\n  position: fixed;\n  pointer-events: auto;\n}\n.c-Hub-bottle-interactive:hover {\n  cursor: pointer;\n}\n.c-Hub-bottle-inner {\n  position: relative;\n  max-width: 325px;\n  text-align: center;\n}\n.c-Hub-bottle-inner:before {\n  content: "";\n  width: 700px;\n  height: 700px;\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  margin-top: -350px;\n  margin-left: -350px;\n  background: radial-gradient(#000, transparent 70%);\n  opacity: 0.7;\n  transform: translateZ(0);\n  transition: opacity 0.8s cubic-bezier(0.165, 0.84, 0.44, 1) 0.4s;\n}\n.is-navigation-active .c-Hub-bottle-inner:before {\n  opacity: 0;\n  transition: opacity 0.4s cubic-bezier(0.165, 0.84, 0.44, 1);\n}\n@media screen and (min-width: 1024px) {\n.c-Hub-bottle-inner {\n    text-align: left;\n    max-width: 300px;\n}\n}\n.c-Hub-bottle-content {\n  font-size: 18px;\n  font-size: 1.125rem;\n  line-height: 22px;\n  opacity: 1;\n  transform: translate3d(0, 0, 0);\n  transition: transform 0.8s cubic-bezier(0.165, 0.84, 0.44, 1) 0.4s, opacity 0.8s cubic-bezier(0.165, 0.84, 0.44, 1) 0.4s;\n}\n.c-Hub-bottle-content b {\n  font-size: 11px;\n  font-size: 0.6875rem;\n  text-transform: uppercase;\n  letter-spacing: 2.73px;\n}\n.is-navigation-active .c-Hub-bottle-content {\n  opacity: 0;\n  transform: translate3d(0, 30px, 0);\n  transition: transform 0s linear 0.4s, opacity 0.4s cubic-bezier(0.165, 0.84, 0.44, 1);\n}\n.c-Hub-bottle-btn {\n  margin-top: 20px;\n  opacity: 1;\n  transform: translate3d(0, 0, 0);\n  transition: transform 0.8s cubic-bezier(0.165, 0.84, 0.44, 1) 0.5s, opacity 0.8s cubic-bezier(0.165, 0.84, 0.44, 1) 0.5s;\n}\n.is-navigation-active .c-Hub-bottle-btn {\n  opacity: 0;\n  transform: translate3d(0, 30px, 0);\n  transition: transform 0s linear 0.4s, opacity 0.4s cubic-bezier(0.165, 0.84, 0.44, 1);\n}\n@media screen and (min-width: 1024px) {\n.c-Hub-bottle-btn {\n    margin-top: 50px;\n}\n}\n',""])},510:function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{class:{"is-navigation-active":t.navigationActive,"is-hub-loaded":t.isLoaded,"is-cursor-pointer":t.isCursorPointer}},[n("div",{staticClass:"c-Hub",attrs:{id:"hub-ui-container"},on:{mousedown:t.onDragStart,"&touchstart":function(e){return t.onDragStart(e)},mousemove:t.onDrag,touchmove:t.onDrag,mouseup:t.onDragEnd,"&touchend":function(e){return t.onDragEnd(e)},"&touchleave":function(e){return t.onDragEnd(e)},mouseleave:t.onDragEnd}},[n("cursor-trigger",{staticClass:"c-Hub-cursor",attrs:{active:!t.instructionActive&&!t.$appdatas.store.bottleHovered,name:"drag"}}),t._v(" "),n("ul",{staticClass:"c-Hub-list t-list"},t._l(t.games,(function(e,i){return n("li",{key:i,class:["c-Hub-list-item",{"is-active":t.$appdatas.store.hubIndex===i+1}]},[n("router-link",{directives:[{name:"show",rawName:"v-show",value:t.navigationActive,expression:"navigationActive"}],staticClass:"c-Hub-list-btn t-btn t-btn--secondary",attrs:{to:{name:e,params:{lang:t.currentLocale}}},nativeOn:{mouseenter:function(e){return t.onPlayEnter(i)},mouseleave:function(e){return t.onPlayLeave(i)}}},[n("span",[t._v(t._s(t.t("gaming.cta_play_alt")))])])],1)})),0),t._v(" "),t.isLoaded?n("hub-navigation",{staticClass:"c-Hub-navigation",attrs:{onNavClick:t.onNavClick,"game-thumbnails":[this.getResource("game-thumbnail-1"),this.getResource("game-thumbnail-2"),this.getResource("game-thumbnail-3"),this.getResource("game-thumbnail-4")],"radar-img":this.getResource("radar")}}):t._e(),t._v(" "),n("div",{ref:"tapBtn",staticClass:"c-Hub-tap",class:{"is-active":0===t.$appdatas.store.hubIndex&&t.isLoaded}},[n("button",{ref:"tapBtnInner",staticClass:"c-Hub-tap-inner t-btn t-btn--tap"},[n("span",{staticClass:"t-btn--tap-indicator"}),t._v(" "),n("span",{staticClass:"t-btn--tap-instructions",domProps:{innerHTML:t._s(t.labelForDesktop("common.dome_bottle_tap","common.dome_bottle_click"))}})])]),t._v(" "),n("div",{staticClass:"c-Hub-bottle"},[n("div",{staticClass:"c-Hub-bottle-inner"},[n("p",{staticClass:"c-Hub-bottle-content t-paragraph",domProps:{innerHTML:t._s(t.sustainabilityText)}}),t._v(" "),n("button",{staticClass:"c-Hub-bottle-btn t-btn",attrs:{type:"button"},on:{click:t.hideBottleInfo}},[t._v(t._s(t.labelForDesktop("common.dome_bottle_hide","common.dome_bottle_hide_desktop")))])]),t._v(" "),n("div",{staticClass:"c-Hub-bottle-interactive",on:{mousedown:t.hideBottleInfo,"&touchstart":function(e){return t.hideBottleInfo(e)}}})])],1),t._v(" "),n("hub-panel",{ref:"loader",attrs:{active:t.instructionActive,onStart:t.onStart,background:this.getResource("hub-preview"),logo:this.getResource("hub-logo")}})],1)};i._withStripped=!0;var a=n(34),o=n(1),s=n(239),r=n(27),l=n(230),c=n(28),h=n(229),u=n(257),d=n(241),p=n(30),m=n(82),v=n(242),g=n(231),f=n(224),b=n(266),x=n(78);const _=new f.a,y=o.vec3.create();class w{constructor(t){this.pickables=[],this.scene=t,this.lastPointerMoveTime=0,this.lastPointerDownTime=0,this.isPointerDown=!1,this.isTouchDevice=!1,window.addEventListener("touchstart",t=>{this.isTouchDevice=!0}),window.addEventListener("touchmove",t=>{this.lastPointerMoveTime=t.timeStamp}),window.addEventListener("mousemove",t=>{this.isTouchDevice||(this.lastPointerMoveTime=t.timeStamp)}),this.onClick=new x.a}addPickable(t,e,n=!1){t.picking=new b.a(e,e.mesh.primitives[0].indices._array,e.mesh.primitives[0].attributes.getSemantic("POSITION").accessor._array,n),this.pickables.push(t)}preRender(){this.isTouchDevice?this.scene.inputs.touches.length&&_.unproject(this.scene.inputs.touches[0].coords,this.scene.camera):_.unproject(this.scene.inputs.mpos,this.scene.camera),this.pickables.forEach(t=>{var e=0!==t.picking.raycast(_,y);!t.isHovered&&e?t.handlePickingEnter():t.isHovered&&!e&&t.handlePickingExit(),t.isHovered=e}),this.scene.inputs.isDown||1===this.scene.inputs.touches.length?(this.isPointerDown||(this.lastPointerDownTime=performance.now()),this.isPointerDown=!0):this.isPointerDown&&(this.lastPointerDownTime>this.lastPointerMoveTime&&(this.pickables.forEach(t=>{t.isHovered&&t.handleClick()}),this.onClick.emit()),this.isPointerDown=!1)}}var C=n(232),T=n(233),P=n(109),M=n(6),S=n(234),E=n(76),O=n(77),L=n(86),A=n(222),D=n(311),N=n.n(D),R=n(267),I=n.n(R),k=n(312),H=n.n(k),F=n(313),z=n.n(F);class B extends A.b{constructor(t,e){super(),this.color=t,this.size=e,this.bloomTextures=[],this.bloomTargets=[],this.bloomSamples=0,this.bloomKernel=null,this.prcPrg=null,this._preCode=H()(),this._code=z()()}init(){const t=this.post.gl,e=t.getParameter(t.MAX_FRAGMENT_UNIFORM_VECTORS),n=L.a.getInstance(t),i=[n.RGB16F,n.RGBA16F,n.RGB32F,n.RGBA32F,n.RGB8],a=n.getRenderableFormat(i);for(var o=0;o<2;++o){this.bloomTargets[o]=new O.a(t),this.bloomTargets[o].bind(),this.bloomTargets[o].attachColor(a.format,a.type,a.internal),this.bloomTargets[o].resize(256,256);var s=this.bloomTargets[o].getColor(0);s.setFilter(!0,!1,!1),s.clamp()}for(this.bloomSamples=64;this.bloomSamples+16>=e;)this.bloomSamples/=2;this.bloomKernel=new Float32Array(4*this.bloomSamples);var r="\n";r+="precision highp float;\n",r+=`#define BLOOM_SAMPLES ${this.bloomSamples} \n`,this.prcPrg=new E.a(t),this.prcPrg.compile(I()(),N()(),r)}resize(t,e){}release(){null!==this.prcPrg&&this.prcPrg.dispose(),this.prcPrg=null;for(var t=0;t<2;++t)this.bloomTargets[t].dispose();this.bloomTargets=[]}genCode(t,e){t.push(this._preCode),e.push(this._code)}preRender(){const t=this.prcPrg,e=this.post;this.computeKernel(),this.bloomTargets[0].bind(),this.bloomTargets[0].defaultViewport(),this.bloomTargets[0].clear(),t.use(),t.tInput(e.mainColor),t.uKernel(this.bloomKernel),e.fillScreen(t),this.transposeKernel(),this.bloomTargets[1].bind(),this.bloomTargets[1].defaultViewport(),this.bloomTargets[1].clear(),t.tInput(this.bloomTargets[0].getColor(0)),t.uKernel(this.bloomKernel),e.fillScreen(t,!0)}setupProgram(t){const e=this.color;t.uBloomColor(e[0],e[1],e[2]),t.tBloom(this.bloomTargets[1].getColor(0))}computeKernel(){const t=this.bloomKernel,e=Math.sqrt(Math.PI);for(var n=0,i=0;i<this.bloomSamples;++i){var a=4*i,o=2*i/(this.bloomSamples-1)-1,s=4*o;n+=s=Math.exp(-s*s/2)/e,t[a+0]=o*this.size,t[a+1]=0,t[a+2]=s,t[a+3]=0}for(i=0;i<this.bloomSamples;++i)t[4*i+2]/=n}transposeKernel(){const t=this.bloomKernel,e=this.post.renderWidth/this.post.renderHeight;for(var n=0;n<this.bloomSamples;++n){var i=n<<2;t[i+1]=t[i]*e,t[i]=0}}}class V extends S.a{constructor(t,e="hub-postprocess"){super(t,e);this.bloom=new B([.7*.8,.7*.8,.7*.8],.3),this.addEffect(this.bloom)}}var U=n(218);const W=o.mat4.create();class G{static hexColorToVec3(t){const e=parseInt(t.charAt(0)+t.charAt(1),16)/255,n=parseInt(t.charAt(2)+t.charAt(3),16)/255,i=parseInt(t.charAt(4)+t.charAt(5),16)/255;return o.vec3.fromValues(e,n,i)}static lerp(t,e,n){return t+(e-t)*n}static remap(t,e,n,i,a){return i+(t-e)*(a-i)/(n-e)}static getNodeScreenPosition(t,e,n){const i=W,a=.5*window.innerWidth,s=.5*window.innerHeight;return t=t||o.vec3.create(),e.updateWorldMatrix(),n.updateWorldMatrix(),o.vec3.copy(t,e._wposition),o.mat4.invert(i,n._wmatrix),o.vec3.transformMat4(t,t,i),o.vec3.transformMat4(t,t,n.lens.getProjection()),t[0]=t[0]*a+a,t[1]=-t[1]*s+s,t}}var j=n(16),Y=n(20),$=o.vec3.create(),q=o.vec3.create(),X=window.innerWidth,K=window.innerHeight;function Z(t,e,n){var i,a;t.touches&&t.touches[0]?(i=t.touches[0].clientX,a=t.touches[0].clientY):(i=t.clientX,a=t.clientY),n[0]=2*i/X-1,n[1]=-(2*a/K-1)}class Q{constructor(t,e={}){this.onMouseWheel=t=>{if(this.controlsEnabled){var e=t.deltaY>0?1:-1;e*=this.wheelSpeed,this.dist+=e,this.dist=Math.max(this.minDist,Math.min(this.dist,this.maxDist))}},this.onMouseDown=t=>{this.controlsEnabled&&(this.mouseButton1=!0,Z(t,this.el,this.mouse),o.vec3.copy(this.mStartDrag,this.mouse))},this.onMouseMove=t=>{this.controlsEnabled&&this.mouseButton1&&(Z(t,this.el,this.mouse),this.mDrag[0]=this.mouse[0]-this.mStartDrag[0],this.mDrag[1]=this.mouse[1]-this.mStartDrag[1],o.vec3.copy(this.mStartDrag,this.mouse),this._drag[0]-=this.mDrag[0]*this.dragSpeed/4,this._drag[1]+=this.mDrag[1]*this.dragSpeed/4,this._drag[1]<=.001&&(this._drag[1]=.001),this._drag[1]>=Math.PI-.001&&(this._drag[1]=Math.PI-.001),this.onDragging.emit(),this.autoSnapTheta=!1,this.dragInitiated=!0,this.halted=!1)},this.onMouseUp=t=>{this.controlsEnabled&&(this.mouseButton1=!1,this.onStopDragging.emit())},this.onRightClick=t=>{t.preventDefault()},this.focusAngle=t=>{const e=t*U.a;this.targetTheta=this._getTransformedThetaAngle(e),this.autoSnapTheta=!0,this.halted=!1},this.reset=()=>{this.resetRotation(),this.resetFov()},this.handleFastDrag=()=>{o.vec3.set(q,this._theta,this._phi,1),o.vec3.distance(this._drag,q)>.5&&Date.now()-this.lastFastDragTime>1e3&&(this.onFastDrag.emit(),this.lastFastDragTime=Date.now())},this.el=t,this.rotateSpeed=e.rotateSpeed?e.rotateSpeed:30,this.wheelSpeed=e.wheelSpeed?e.wheelSpeed:.5,this.dragSpeed=e.dragSpeed?e.dragSpeed:30,this.dist=e.dist?e.dist:10,this.minDist=e.minDist?e.minDist:1,this.maxDist=e.maxDist?e.maxDist:100,this.center=e.center?e.center:o.vec3.fromValues(0,0,0),this._theta=e._theta?e._theta:0,this._phi=e._phi?e._phi:.5*Math.PI,this.mouseButton1=!1,this.mouse=o.vec3.fromValues(0,0,1),this.mStartDrag=o.vec3.fromValues(0,0,1),this.mDrag=o.vec3.fromValues(0,0,1),this._drag=o.vec3.fromValues(this._theta,this._phi,1),this.cam=null,this.defaultPhi=this._phi=.56*Math.PI,Y.a.isDesktop?this.defaultFov=50:this.defaultFov=window.innerWidth<window.innerHeight?35:50,Y.a.onChangeOrientation(()=>{this.defaultFov=this.fov=window.innerWidth<window.innerHeight?35:50,this.setFov(this.fov)}),this.fov=this.defaultFov,this.autoRecenterPhi=!0,this.autoSnapTheta=!1,this.onDragging=new x.a,this.onStopDragging=new x.a,this.onSlowDown=new x.a,this.onHalt=new x.a,this.onFastDrag=new x.a,this.dragInitiated=!1,this.lastFastDragTime=Date.now(),this.targetTheta=this._theta,this.targetPhi=this.defaultPhi,this.controlsEnabled=!0,this.halted=!0}start(t){this.cam=t,this.el.addEventListener("mousemove",this.onMouseMove),this.el.addEventListener("touchmove",this.onMouseMove),this.el.addEventListener("touchstart",this.onMouseDown),this.el.addEventListener("mousedown",this.onMouseDown),this.el.addEventListener("mouseup",this.onMouseUp),this.el.addEventListener("touchend",this.onMouseUp),this.el.addEventListener("wheel",this.onMouseWheel),this.el.addEventListener("contextmenu",this.onRightClick),this.el.addEventListener("mouseleave",this.onMouseUp),this.onMouseDown({clientX:0,clientY:0}),this.onMouseMove({clientX:0,clientY:0}),this.onMouseUp({clientX:0,clientY:0})}stop(){this.cam=null,this.el.removeEventListener("mousemove",this.onMouseMove),this.el.removeEventListener("touchmove",this.onMouseMove),this.el.removeEventListener("touchstart",this.onMouseDown),this.el.removeEventListener("mousedown",this.onMouseDown),this.el.removeEventListener("mouseup",this.onMouseUp),this.el.removeEventListener("touchend",this.onMouseUp),this.el.removeEventListener("wheel",this.onMouseWheel),this.el.removeEventListener("contextmenu",this.onRightClick),this.el.removeEventListener("mouseleave",this.onMouseUp),Y.a.onChangeOrientation(()=>{})}getIndexOfNearestAngle(t){const e=this._getCurrentRotation();let n,i=1/0;return t.forEach((t,a)=>{const o=Math.abs(e-t);o<i&&(n=a,i=o)}),n}async playZoomTransition(t,e="power2.in"){this.autoRecenterPhi=!1,await j.a.to(this,{fov:5,_phi:.58*Math.PI,duration:t,ease:e,onUpdate:()=>{this._drag[1]=this._phi,this.setFov(this.fov)}})}rotateTo(t,e){const n=this._getTransformedThetaAngle(t);this.targetTheta=n,this.targetPhi=e,this.autoSnapTheta=!0,this.autoRecenterPhi=!0}setFov(t){this.cam.lens.setAutoFov(t*U.a)}resetFov(){this.fov=this.defaultFov,this.cam.lens.setAutoFov(this.fov*U.a)}resetRotation(){this._theta=this._drag[0]=this.targetTheta=0,this.autoSnapTheta=!1,this._phi=this._drag[1]=this.targetPhi=this.defaultPhi,this.autoRecenterPhi=!0}update(t){if(this.cam){var e=this.dist,n=t*this.rotateSpeed;this.autoSnapTheta&&(this._drag[0]=G.lerp(this._drag[0],this.targetTheta,.05)),this.autoRecenterPhi&&(this.mouseButton1||(this._drag[1]=G.lerp(this._drag[1],this.targetPhi,.05))),this._theta+=(this._drag[0]-this._theta)*n,this._phi+=(this._drag[1]-this._phi)*n,Math.abs(this._theta-this._drag[0])<.05&&!this.mouseButton1&&this.dragInitiated&&!this.autoSnapTheta&&(this.onSlowDown.emit(),this.dragInitiated=!1),Math.abs(this.targetTheta-this._drag[0])<.05&&!this.mouseButton1&&!this.halted&&(this.onHalt.emit(),this.halted=!0),this.handleFastDrag(),$[0]=this.center[0]+e*Math.sin(this._phi)*Math.sin(this._theta),$[1]=this.center[1]+e*Math.cos(this._phi),$[2]=this.center[2]+e*Math.sin(this._phi)*Math.cos(this._theta),o.vec3.copy(this.cam.position,$),this.cam.lookAt(this.center),this.cam.invalidate()}}_getCurrentRotation(){return(this._theta-Math.floor((this._theta+Math.PI)/(2*Math.PI))*(2*Math.PI))*U.b}_getTransformedThetaAngle(t){let e=t+Math.floor((this._theta+Math.PI)/(2*Math.PI))*Math.PI*2;const n=e-this._theta;return Math.abs(n)>Math.PI&&(e-=2*Math.PI*Math.sign(n)),e}}var J=n(40),tt=n(228),et=n(235),nt=n(225);const it={Bottle:"hub/Bottle.gltf",Portals:"hub/Portals.gltf",Skybox:"hub/Skybox.gltf"},at={Bottle_Interior_MatCap:"hub/Matcaps/bottle_interior.png",Bottle_Glass_MatCap:"hub/Matcaps/bottle_glass.png",Bottle_Top_MatCap:"hub/Matcaps/bottle_top.png",Bottle_Gold_MatCap:"hub/Matcaps/bottle_gold.png",Bottle_SparkledGold_MatCap:"hub/Matcaps/bottle_sparkled_gold.png",Bottle_SparkledGold_NormalMap:"hub/bottle/sparkled_gold_normalmap.png",Bottle_Interior_Ramp:"hub/bottle/bottle_interior_ramp.png",Bottle_dots:"hub/bottle/dots.png",Bottle_dots_masks:"hub/bottle/dots_masks.png",Flare:"hub/bottle/flare.png",Portal_video_fallback_game1:"hub/portals/videos/fallbacks/game1.jpg",Portal_video_fallback_game2:"hub/portals/videos/fallbacks/game2.jpg",Portal_video_fallback_game3:"hub/portals/videos/fallbacks/game3.jpg",Portal_video_fallback_game4:"hub/portals/videos/fallbacks/game4.jpg",Portal_logo_game1:"hub/portals/logos/game1.png",Portal_logo_game2:"hub/portals/logos/game2.png",Portal_logo_game3:"hub/portals/logos/game3.png",Portal_logo_game4:"hub/portals/logos/game4.png",Portal_logo_alpha_game1:"hub/portals/logos/game1_alpha.png",Portal_logo_alpha_game2:"hub/portals/logos/game2_alpha.png",Portal_logo_alpha_game3:"hub/portals/logos/game3_alpha.png",Portal_logo_alpha_game4:"hub/portals/logos/game4_alpha.png",Portal_clouds:"hub/portals/alphas/clouds.png",Portal_gradient:"hub/portals/alphas/gradient.png",Portal_gradient_centered:"hub/portals/alphas/gradient_centered.png",Portal_particles:"hub/portals/alphas/particles.png",Portal_particles_falloff:"hub/portals/alphas/particles_falloff.png",Portal_perlin:"hub/portals/alphas/perlin.png",Portal_radial_mask:"hub/portals/alphas/radial_mask.png",Portal_displacement_liquid:"hub/portals/displacement/liquid.png",Portal_ramp_iridescent:"hub/portals/ramps/iridescent.png"},ot={Dome_2048:["hub/cubemaps/dome/2048/posx.jpg","hub/cubemaps/dome/2048/posy.jpg","hub/cubemaps/dome/2048/posz.jpg","hub/cubemaps/dome/2048/negx.jpg","hub/cubemaps/dome/2048/negy.jpg","hub/cubemaps/dome/2048/negz.jpg"],Dome_1024:["hub/cubemaps/dome/1024/posx.jpg","hub/cubemaps/dome/1024/posy.jpg","hub/cubemaps/dome/1024/posz.jpg","hub/cubemaps/dome/1024/negx.jpg","hub/cubemaps/dome/1024/negy.jpg","hub/cubemaps/dome/1024/negz.jpg"],Ambilight_1024:["hub/cubemaps/ambilight/1024/posx.jpg","hub/cubemaps/ambilight/1024/posy.jpg","hub/cubemaps/ambilight/1024/posz.jpg","hub/cubemaps/ambilight/1024/negx.jpg","hub/cubemaps/ambilight/1024/negy.jpg","hub/cubemaps/ambilight/1024/negz.jpg"]};class st{static setupCmnTexs(t){let e;Object.keys(at).forEach(n=>{e=new et.b({std:J.a.asset_url(at[n])}),new nt.b(n,e,t)}),Object.keys(ot).forEach(n=>{const i=ot[n].map(t=>J.a.asset_url(t));e=new et.a({std:i}),new nt.a(n,e,t)})}static setupGltfs(t){Object.keys(it).forEach(e=>{new tt.a(e,J.a.asset_url(it[e]),t)})}static processGltfs(t,e){Object.keys(it).forEach(n=>{const i=e.get(n);t.root.add(i.root)})}}var rt=n(236),lt=n.n(rt),ct=n(237),ht=n.n(ct),ut=n(319),dt=n.n(ut),pt=n(320),mt=n.n(pt);E.a.debug=!1;class vt{constructor(t){const e=t.gl;e.getExtension("OES_standard_derivatives"),this.hasHighp=function(t){const e=t.getShaderPrecisionFormat(t.VERTEX_SHADER,t.HIGH_FLOAT);return t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.HIGH_FLOAT).precision>0&&e.precision>0}(e),this.programs=[this.debugFbo=new E.a(e),this.fade=new E.a(e)],this.compile()}precision(){return this.hasHighp?"highp":"mediump"}compile(){var t="\n";t+="precision "+this.precision()+" float;\n",this.debugFbo.compile(lt()(),ht()(),t),this.fade.compile(dt()(),mt()(),t),this.process()}process(){for(var t of this.programs)t.use()}dispose(){for(let t=0;t<this.programs.length;t++)this.programs[t].dispose();this.programs=null}}var gt=n(219),ft=n(217),bt=n(2),xt=n(42),_t=n(321),yt=n.n(_t),wt=n(322),Ct=n.n(wt),Tt=n(44),Pt=n(43),Mt=n(13),St=n(3),Et=n(45),Ot=n(26),Lt=n(80);const At=o.mat4.create();class Dt extends Lt.a{constructor(t,e){const n=t.gl;if(super(n),this.params=e,this.scene=t,this.forceTextureLQ=!1,e.color||this.setColor(1,1,1),!e.overlayColor){const t=[.0235294118,.133333333,.356862745];this.setOverlayColor(t[0],t[1],t[2])}e.overlayOpacity||this.setOverlayOpacity(.8),e.overlayFactor||this.setOverlayFactor(1),e.ambilightStrength||(this.params.ambilightStrength=1),this.glconfig.enableDepthTest(!0).enableCullface(!0).cullFace(n.FRONT);const i=new Nt(this);return this.addPass(i,ft.a.COLOR),this.mask=gt.a.OPAQUE,i.version.set(J.a.isWebgl2?"300 es":"100"),this}setColor(t,e,n){this.params.color||(this.params.color=o.vec3.create()),o.vec3.set(this.params.color,t,e,n)}setOverlayColor(t,e,n){this.params.overlayColor||(this.params.overlayColor=o.vec3.create()),o.vec3.set(this.params.overlayColor,t,e,n)}getOverlayColor(){return this.params.overlayColor}setOverlayOpacity(t){this.params.overlayOpacity=t}getOverlayOpacity(){return this.params.overlayOpacity}setOverlayFactor(t,e=0){0===e?this.params.overlayFactor=t:j.a.to(this.params,{overlayFactor:t,duration:e})}getOverlayFactor(){return this.params.overlayFactor}}class Nt extends xt.a{constructor(t){super({uid:"dome",vert:yt()(),frag:Ct()()}),this.material=t;const e=this.inputs;e.add(this.version=new Tt.a("100")),e.add(this.precision=new Pt.a("highp")),e.add(this.shaderid=new Mt.a("id_dome",!0)),e.add(this.alpha=new St.d("alpha",1)),e.add(this.alphaFactor=new St.d("alphaFactor",1)),e.add(this.alphaCutoff=new St.d("alphaCutoff",1)),e.add(this.alphaMode=new Ot.a("alphaMode",Et.a)),e.add(this.doubleSided=new Mt.a("doubleSided",!1))}prepare(t,e,n){const i=this.material.params;if(t.uMVP&&(n.modelViewProjectionMatrix(At,e._wmatrix),t.uMVP(At)),t.uWorldMatrix&&t.uWorldMatrix(e._wmatrix),t.uTime&&t.uTime(this.material.scene.time),t.uColor&&t.uColor(i.color),t.uOverlayColor&&t.uOverlayColor(i.overlayColor),t.uOverlayOpacity&&t.uOverlayOpacity(i.overlayOpacity),t.uOverlayFactor&&t.uOverlayFactor(i.overlayFactor),t.uEnvRotation&&t.uEnvRotation(i.rotation),t.tEnv){const e=i.texs.get("Dome_2048"),n=i.texs.get("Dome_1024");t.tEnv(Y.a.isMobile||this.material.forceTextureLQ?n:e)}t.tAmbilight&&t.tAmbilight(i.texs.get("Ambilight_1024")),t.tAmbilightNoise&&t.tAmbilightNoise(i.texs.get("Portal_clouds")),t.uAmbilightStrength&&t.uAmbilightStrength(i.ambilightStrength)}}var Rt=n(323),It=n.n(Rt),kt=n(324),Ht=n.n(kt),Ft=n(79);const zt=o.mat4.create();class Bt extends Lt.a{constructor(t,e){const n=t.gl;super(n),this.scene=t,this.params=e,this.glconfig.enableDepthTest(!0).depthMask(!0).enableCullface(!0).enableBlend(!0).blendFunc(n.SRC_ALPHA,n.ONE_MINUS_SRC_ALPHA).cullFace(n.BACK);const i=new Vt(this);return this.addPass(i,ft.a.COLOR),this.mask=gt.a.BLENDED,i.version.set(J.a.isWebgl2?"300 es":"100"),this}}class Vt extends xt.a{constructor(t){super({uid:"portal-outline",vert:It()(),frag:Ht()()}),this.material=t;const e=this.inputs;e.add(this.texcoord0=new Ft.a("aTexCoord0",o.mat3.create())),e.add(this.version=new Tt.a("100")),e.add(this.precision=new Pt.a("highp")),e.add(this.shaderid=new Mt.a("id_portal-outline",!0)),e.add(this.alpha=new St.d("alpha",1)),e.add(this.alphaFactor=new St.d("alphaFactor",1)),e.add(this.alphaCutoff=new St.d("alphaCutoff",1)),e.add(this.alphaMode=new Ot.a("alphaMode",Et.a)),e.add(this.doubleSided=new Mt.a("doubleSided",!1))}prepare(t,e,n){const i=this.material.params.texs,a=this.material.params.portal;t.uMVP&&(n.modelViewProjectionMatrix(zt,e._wmatrix),t.uMVP(zt)),t.uTime&&t.uTime(a.time),t.uColor&&t.uColor(a.color),t.uDeformStrength&&t.uDeformStrength(G.lerp(.1,.2,a.intensity)),t.tMain&&t.tMain(i.get("Portal_gradient_centered")),t.tNoise&&t.tNoise(i.get("Portal_perlin"))}}var Ut=n(325),Wt=n.n(Ut),Gt=n(326),jt=n.n(Gt);const Yt=o.mat4.create();class $t extends Lt.a{constructor(t,e){const n=t.gl;super(n),this.scene=t,this.params=e,this.glconfig.enableDepthTest(!0).depthMask(!0).enableCullface(!0).cullFace(n.BACK);const i=new qt(this);return this.addPass(i,ft.a.COLOR),this.mask=gt.a.OPAQUE,i.version.set(J.a.isWebgl2?"300 es":"100"),this}}class qt extends xt.a{constructor(t){super({uid:"portal-surface",vert:Wt()(),frag:jt()()}),this.material=t;const e=this.inputs;e.add(this.texcoord0=new Ft.a("aTexCoord0",o.mat3.create())),e.add(this.version=new Tt.a("100")),e.add(this.precision=new Pt.a("highp")),e.add(this.shaderid=new Mt.a("id_portal-surface",!0)),e.add(this.alpha=new St.d("alpha",1)),e.add(this.alphaFactor=new St.d("alphaFactor",1)),e.add(this.alphaCutoff=new St.d("alphaCutoff",1)),e.add(this.alphaMode=new Ot.a("alphaMode",Et.a)),e.add(this.doubleSided=new Mt.a("doubleSided",!1))}prepare(t,e,n){const i=this.material.params,a=i.texs,o=i.portal;t.uMVP&&(n.modelViewProjectionMatrix(Yt,e._wmatrix),t.uMVP(Yt)),t.uTime&&t.uTime(o.time),t.uSpeed&&t.uSpeed(.05),t.uDistortStrength&&t.uDistortStrength(G.lerp(.035,.07,o.intensity)),t.uScale&&t.uScale(G.lerp(.9,1,o.zoom)),t.uIridescenceFactor&&t.uIridescenceFactor(.75*o.intensity),t.uLogoBackgroundColor&&t.uLogoBackgroundColor(i.logoBackgroundColor),t.uLogoOpacity&&t.uLogoOpacity(o.logoOpacity),t.tVideo&&(o.video.playing?(o.video.preRender(),t.tVideo(o.video)):t.tVideo(a.get("Portal_video_fallback_"+o.name))),t.tLogo&&t.tLogo(a.get("Portal_logo_"+o.name)),t.tLogoAlpha&&t.tLogoAlpha(a.get("Portal_logo_alpha_"+o.name)),t.tDisplacement&&t.tDisplacement(a.get("Portal_displacement_liquid")),t.tMask&&t.tMask(a.get("Portal_radial_mask")),t.tRamp&&t.tRamp(a.get("Portal_ramp_iridescent"))}}var Xt=n(327),Kt=n.n(Xt),Zt=n(328),Qt=n.n(Zt);const Jt=o.mat4.create();class te extends Lt.a{constructor(t,e){const n=t.gl;super(n),this.scene=t,this.params=e,this.glconfig.enableDepthTest(!0).depthMask(!0).enableCullface(!0).enableBlend(!0).blendFunc(n.SRC_ALPHA,n.ONE_MINUS_SRC_ALPHA).cullFace(n.BACK);const i=new ee(this);return this.addPass(i,ft.a.COLOR),this.mask=gt.a.BLENDED,i.version.set(J.a.isWebgl2?"300 es":"100"),this}}class ee extends xt.a{constructor(t){super({uid:"portal-smoke",vert:Kt()(),frag:Qt()()}),this.material=t;const e=this.inputs;e.add(this.texcoord0=new Ft.a("aTexCoord0",o.mat3.create())),e.add(this.version=new Tt.a("100")),e.add(this.precision=new Pt.a("highp")),e.add(this.shaderid=new Mt.a("id_portal-smoke",!0)),e.add(this.alpha=new St.d("alpha",1)),e.add(this.alphaFactor=new St.d("alphaFactor",1)),e.add(this.alphaCutoff=new St.d("alphaCutoff",1)),e.add(this.alphaMode=new Ot.a("alphaMode",Et.a)),e.add(this.doubleSided=new Mt.a("doubleSided",!1))}prepare(t,e,n){const i=this.material.params.texs,a=this.material.params.portal;t.uMVP&&(n.modelViewProjectionMatrix(Jt,e._wmatrix),t.uMVP(Jt)),t.uTime&&t.uTime(a.time),t.uSpeed&&t.uSpeed(.1),t.uColor&&t.uColor(a.color),t.uOpacity&&t.uOpacity(G.lerp(.5,.85,a.intensity)),t.tMain&&t.tMain(i.get("Portal_clouds")),t.tFalloff&&t.tFalloff(i.get("Portal_gradient"))}}var ne=n(329),ie=n.n(ne),ae=n(330),oe=n.n(ae);const se=o.mat4.create();class re extends Lt.a{constructor(t,e){const n=t.gl;super(n),this.scene=t,this.params=e,this.glconfig.enableDepthTest(!0).depthMask(!0).enableCullface(!0).enableBlend(!0).blendFunc(n.SRC_ALPHA,n.ONE_MINUS_SRC_ALPHA).cullFace(n.BACK);const i=new le(this);return this.addPass(i,ft.a.COLOR),this.mask=gt.a.BLENDED,i.version.set(J.a.isWebgl2?"300 es":"100"),this}}class le extends xt.a{constructor(t){super({uid:"portal-particles",vert:ie()(),frag:oe()()}),this.material=t;const e=this.inputs;e.add(this.texcoord0=new Ft.a("aTexCoord0",o.mat3.create())),e.add(this.version=new Tt.a("100")),e.add(this.precision=new Pt.a("highp")),e.add(this.shaderid=new Mt.a("id_portal-particles",!0)),e.add(this.alpha=new St.d("alpha",1)),e.add(this.alphaFactor=new St.d("alphaFactor",1)),e.add(this.alphaCutoff=new St.d("alphaCutoff",1)),e.add(this.alphaMode=new Ot.a("alphaMode",Et.a)),e.add(this.doubleSided=new Mt.a("doubleSided",!1))}prepare(t,e,n){const i=this.material.params.texs,a=this.material.params.portal;t.uMVP&&(n.modelViewProjectionMatrix(se,e._wmatrix),t.uMVP(se)),t.uTime&&t.uTime(a.time),t.uSpeed&&t.uSpeed(.075),t.uColor&&t.uColor(a.color),t.uOpacity&&t.uOpacity(G.lerp(.15,.45,a.intensity)),t.tMain&&t.tMain(i.get("Portal_particles")),t.tFalloff&&t.tFalloff(i.get("Portal_particles_falloff"))}}var ce=n(36);class he extends ce.a{constructor(t,e,n=!0){super(t,t.RGB,t.UNSIGNED_BYTE),this.playing=!1,this.timeupdate=!1,this.isReady=!1,this.setFilter(!0,!1,!1),this.fromData(1,1,new Uint8Array([0,0,0,255])),this._initVideo(e),n&&this.play()}play(){this.video.play()}preRender(){}updateTexture(){this.isReady&&this.fromImage(this.video)}_initVideo(t){const e=document.createElement("video");this.video=e,this.playing=!1,this.timeupdate=!1,e.autoplay=!0,e.muted=!0,e.loop=!0,e.setAttribute("playsinline",""),e.width=e.videoWidth,e.height=e.videoHeight,e.addEventListener("playing",()=>{this.playing=!0,this._checkReady()},!0),e.addEventListener("timeupdate",()=>{this.timeupdate=!0,this._checkReady()},!0),e.src=t}_checkReady(){this.playing&&this.timeupdate&&(this.isReady=!0)}}const ue="967E2F",de="3B70FF",pe="E05019",me="647882",ve=[M.a.GAME_4,M.a.GAME_3,M.a.GAME_1,M.a.GAME_2],ge=[me,pe,de,ue],fe=[144,72,-72,-144];var be;!function(t){t[t.LOW=0]="LOW",t[t.MEDIUM=1]="MEDIUM",t[t.HIGH=2]="HIGH"}(be||(be={}));class xe{constructor(t,e,n,i){this.intensity=0,this.time=0,this.zoom=0,this.mode=be.LOW,this.index=t,this.gameId=ve[t],this.name=this.gameId.toString().replace("_","").toLowerCase(),this.color=G.hexColorToVec3(ge[t]),this.angle=fe[t],this.logoOpacity=0,this.onSelect=e,this.onMouseEnter=n,this.onMouseExit=i}setMode(t){if(this.mode===t)return;let e,n;switch(this.mode=t,t){case be.LOW:e=xe.MIN_INTENSITY,n=0;break;case be.MEDIUM:e=G.lerp(xe.MIN_INTENSITY,xe.MAX_INTENSITY,2/3),n=0;break;case be.HIGH:e=xe.MAX_INTENSITY,n=1.5}j.a.to(this,{intensity:e,zoom:n,duration:1,ease:"power3.out"})}handleClick(){this.onSelect.emit(this)}handlePickingEnter(){this.onMouseEnter.emit(this)}handlePickingExit(){this.onMouseExit.emit(this)}fadeInLogo(t=1,e=0){j.a.killTweensOf(this,{logoOpacity:!0}),j.a.to(this,{logoOpacity:1,delay:e,duration:t})}fadeOutLogo(t=1,e=0){j.a.killTweensOf(this,{logoOpacity:!0}),j.a.to(this,{logoOpacity:0,delay:e,duration:t,ease:"power3.in"})}update(t){this.time+=t*G.lerp(.5,1,this.intensity)}}xe.MIN_INTENSITY=0,xe.MAX_INTENSITY=1.5;class _e{constructor(t){this.portals=[],this.videoUpdateOdd=!0,this.scene=t;const e=G.hexColorToVec3("1f213a");this.logoBackgroundColor=o.vec4.fromValues(e[0],e[1],e[2],.8),this.onSelectPortal=new x.a,this.onMouseEnterPortal=new x.a,this.onMouseExitPortal=new x.a;for(var n=0;n<4;n++){const e=new xe(n,this.onSelectPortal,this.onMouseEnterPortal,this.onMouseExitPortal);var i="/assets/webgl/hub/portals/videos/"+e.name+".mp4";e.video=new he(t.gl,i),this.portals.push(e)}}postRender(){this.videoUpdateOdd=!this.videoUpdateOdd;const t=this.videoUpdateOdd?0:2;for(let e=0;e<2;e++)this.portals[e+t].video.updateTexture()}init(t){this.root=t.getElementByName(bt.a.NODE,"Portals"),this.root._children.forEach((t,e)=>{const n=this.portals[e];t._children[0]._children.forEach(t=>{const e=t,i=e.renderable;"Collider"===e.name&&this.scene.pickingController.addPickable(n,e),"Surface"===e.name&&(n.surface=i,n.surface.materials[0]=new $t(this.scene,{portal:n,texs:this.scene.cmnTexs,logoBackgroundColor:this.logoBackgroundColor})),"Smoke"===e.name&&(n.smoke=i,n.smoke.materials[0]=new te(this.scene,{portal:n,texs:this.scene.cmnTexs})),"Outline"===e.name&&(n.outline=i,n.outline.materials[0]=new Bt(this.scene,{portal:n,texs:this.scene.cmnTexs})),"Particles"===e.name&&(n.particles=i,n.particles.materials[0]=new re(this.scene,{portal:n,texs:this.scene.cmnTexs}))}),this.portals.push(n)})}getPortal(t){return this.portals[t]}forEachPortal(t){this.portals.forEach(t)}preRender(){this.portals.forEach(t=>{t.update(this.scene.dt)})}render(t){this.portals.forEach(e=>{e.surface.render(this.scene,t,gt.a.OPAQUE,ft.a.DEFAULT),e.smoke.render(this.scene,t,gt.a.BLENDED,ft.a.DEFAULT),e.outline.render(this.scene,t,gt.a.BLENDED,ft.a.DEFAULT),e.particles.render(this.scene,t,gt.a.BLENDED,ft.a.DEFAULT)})}}class ye{constructor(t){this.scene=t}init(t){this.renderer=t.getElementByName(bt.a.NODE,"Cube").renderable,this.material=new Dt(this.scene,{texs:this.scene.cmnTexs,rotation:Math.PI}),this.renderer.materials[0]=this.material,this.setOverlayVisible(!1)}setOverlayVisible(t){this.material.setOverlayFactor(t?1:0,1)}updateAmbilight(){if(this.scene.nearestPortal){const t=this.scene.nearestPortal,e=G.remap(t.intensity,xe.MIN_INTENSITY,xe.MAX_INTENSITY,.7,1.5);this.material.params.ambilightStrength=e}}preRender(){this.updateAmbilight()}setColor(t,e,n){this.material.setColor(t,e,n)}render(t){this.renderer.render(this.scene,t,gt.a.OPAQUE,ft.a.DEFAULT)}}var we=n(268),Ce=n(331),Te=n.n(Ce),Pe=n(332),Me=n.n(Pe);class Se extends Lt.a{constructor(t,e){const n=t.gl;super(n),this.params=e,this.scene=t,this.glview=t.glview,this.dotsFactor=1,this.mouseScreenPosition=o.vec2.create(),this.clickPosition=o.vec3.create(),this.waveRadius=0,this.glconfig.enableDepthTest(!0).depthMask(!0).enableCullface(!0).cullFace(n.BACK);const i=new De(this);return this.addPass(i,ft.a.COLOR),this.mask=gt.a.OPAQUE,i.version.set(J.a.isWebgl2?"300 es":"100"),this}setDotsFactor(t){this.dotsFactor=G.lerp(this.dotsFactor,t,.15)}setMouseScreenPosition(t){o.vec2.lerp(this.mouseScreenPosition,this.mouseScreenPosition,t,.075)}setClickPosition(t){o.vec3.copy(this.clickPosition,t)}}const Ee=o.mat4.create(),Oe=o.mat4.create(),Le=o.mat3.create(),Ae=o.vec2.create();class De extends xt.a{constructor(t){super({uid:"bottle-glass",vert:Te()(),frag:Me()()}),this.material=t,this.glassColor=G.hexColorToVec3("291c16");const e=this.inputs;e.add(this.version=new Tt.a("100")),e.add(this.precision=new Pt.a("highp")),e.add(this.shaderid=new Mt.a("id_bottle-glass",!0)),e.add(this.texcoord0=new Ft.a("aTexCoord0",o.mat3.create())),e.add(this.alpha=new St.d("alpha",1)),e.add(this.alphaFactor=new St.d("alphaFactor",1)),e.add(this.alphaCutoff=new St.d("alphaCutoff",1)),e.add(this.alphaMode=new Ot.a("alphaMode",Et.a)),e.add(this.doubleSided=new Mt.a("doubleSided",!1))}prepare(t,e,n){const i=this.material.params;t.uWorldMatrix&&t.uWorldMatrix(e._wmatrix),t.uVP&&t.uVP(n._viewProj),t.uViewMatrix&&t.uViewMatrix(n._view),t.uNormalMatrix&&(o.mat4.invert(Oe,n._wmatrix),o.mat4.multiply(Ee,Oe,e._wmatrix),o.mat3.normalFromMat4(Le,Ee),t.uNormalMatrix(Le)),t.uTime&&t.uTime(this.material.scene.time),t.uResolution&&(o.vec2.set(Ae,this.material.glview.width,this.material.glview.height),t.uResolution(Ae)),t.uVerticalSize&&t.uVerticalSize(i.verticalSize),t.tBackground&&t.tBackground(i.backgroundFbo.getColor()),t.tMatCap&&t.tMatCap(i.texs.get("Bottle_Glass_MatCap")),t.tDots&&t.tDots(i.texs.get("Bottle_dots")),t.tDotsMasks&&t.tDotsMasks(i.texs.get("Bottle_dots_masks")),t.uDotsFactor&&t.uDotsFactor(this.material.dotsFactor),t.uMouseScreenPosition&&t.uMouseScreenPosition(this.material.mouseScreenPosition),t.uClickPosition&&t.uClickPosition(this.material.clickPosition),t.uCameraPosition&&t.uCameraPosition(n._wposition),t.uWaveRadius&&t.uWaveRadius(this.material.waveRadius),t.tEnvMap&&t.tEnvMap(i.texs.get("Dome_1024")),t.uEnvRotation&&t.uEnvRotation(2.2),t.uGlassColor&&t.uGlassColor(this.glassColor)}}var Ne=n(333),Re=n.n(Ne),Ie=n(334),ke=n.n(Ie);class He extends Lt.a{constructor(t){const e=t.gl;super(e),this.glconfig.enableDepthTest(!0).depthMask(!0).enableCullface(!0).enableBlend(!0).blendFunc(e.SRC_ALPHA,e.ONE_MINUS_SRC_ALPHA).cullFace(e.BACK);const n=new Ve(this);return this.addPass(n,ft.a.COLOR),this.mask=gt.a.BLENDED,n.version.set(J.a.isWebgl2?"300 es":"100"),this}}const Fe=o.mat4.create(),ze=o.mat4.create(),Be=o.mat3.create();class Ve extends xt.a{constructor(t){super({uid:"bottle-interior",vert:Re()(),frag:ke()()}),this.material=t;const e=this.inputs;e.add(this.version=new Tt.a("100")),e.add(this.precision=new Pt.a("highp")),e.add(this.shaderid=new Mt.a("id_bottle-interior",!0)),e.add(this.alpha=new St.d("alpha",1)),e.add(this.alphaFactor=new St.d("alphaFactor",1)),e.add(this.alphaCutoff=new St.d("alphaCutoff",1)),e.add(this.alphaMode=new Ot.a("alphaMode",Et.a)),e.add(this.doubleSided=new Mt.a("doubleSided",!1))}prepare(t,e,n){t.uWorldMatrix&&t.uWorldMatrix(e._wmatrix),t.uVP&&t.uVP(n._viewProj),t.uViewMatrix&&t.uViewMatrix(n._view),t.uNormalMatrix&&(o.mat4.invert(ze,n._wmatrix),o.mat4.multiply(Fe,ze,e._wmatrix),o.mat3.normalFromMat4(Be,Fe),t.uNormalMatrix(Be)),t.uMatCap&&t.uMatCap(this.material.matcap),t.uColorRamp&&t.uColorRamp(this.material.colorRamp),t.uVerticalSize&&t.uVerticalSize(this.material.verticalSize)}}var Ue=n(335),We=n.n(Ue),Ge=n(336),je=n.n(Ge);class Ye extends Lt.a{constructor(t,e){const n=t.gl;super(n),null==e.normalIntensity&&(e.normalIntensity=1),null==e.aoIntensity&&(e.aoIntensity=1),this.options=e,this.glconfig.enableDepthTest(!0).depthMask(!0).enableCullface(!0).cullFace(n.BACK),this.mask=gt.a.OPAQUE,this.options.alphaMap&&(this.glconfig.enableBlend(!0).blendFunc(n.SRC_ALPHA,n.ONE_MINUS_SRC_ALPHA),this.mask=gt.a.BLENDED);const i=new Ke(this);return this.addPass(i,ft.a.COLOR),i.version.set(J.a.isWebgl2?"300 es":"100"),this}}const $e=o.mat4.create(),qe=o.mat4.create(),Xe=o.mat3.create();class Ke extends xt.a{constructor(t){super({uid:"matcap",vert:We()(),frag:je()()}),this.material=t;const e=this.inputs;e.add(this.version=new Tt.a("100")),e.add(this.precision=new Pt.a("highp")),e.add(this.shaderid=new Mt.a("id_matcap",!0)),e.add(this.alpha=new St.d("alpha",1)),e.add(this.alphaFactor=new St.d("alphaFactor",1)),e.add(this.alphaCutoff=new St.d("alphaCutoff",1)),e.add(this.alphaMode=new Ot.a("alphaMode",Et.a)),e.add(this.doubleSided=new Mt.a("doubleSided",!1)),this.material.options.alphaMap&&e.add(this.hasAlphaMap=new Mt.a("HAS_alphaMap")),this.material.options.normalMap&&e.add(this.hasNormalMap=new Mt.a("HAS_normalMap")),this.material.options.aoMap&&e.add(this.hasAOMap=new Mt.a("HAS_aoMap"))}prepare(t,e,n){t.uWorldMatrix&&t.uWorldMatrix(e._wmatrix),t.uVP&&t.uVP(n._viewProj),t.uViewMatrix&&t.uViewMatrix(n._view),t.uNormalMatrix&&(o.mat4.invert(qe,n._wmatrix),o.mat4.multiply($e,qe,e._wmatrix),o.mat3.normalFromMat4(Xe,$e),t.uNormalMatrix(Xe)),t.uMatCap&&t.uMatCap(this.material.options.matcapMap),t.uAlphaMap&&this.material.options.alphaMap&&t.uAlphaMap(this.material.options.alphaMap),t.uNormalMap&&this.material.options.normalMap&&t.uNormalMap(this.material.options.normalMap),t.uNormalIntensity&&t.uNormalIntensity(this.material.options.normalIntensity),t.uAOMap&&this.material.options.aoMap&&t.uAOMap(this.material.options.aoMap),t.uAOIntensity&&t.uAOIntensity(this.material.options.aoIntensity)}}var Ze=n(337),Qe=n.n(Ze),Je=n(338),tn=n.n(Je);const en=o.mat4.create();class nn extends Lt.a{constructor(t,e){const n=t.gl;super(n),this.params=e,e.color||this.setColor(1,1,1),this.glconfig.enableDepthTest(!1).enableCullface(!0).cullFace(n.BACK).enableBlend().blendFunc(n.ONE,n.ONE);const i=new an(this);return this.addPass(i,ft.a.COLOR),this.mask=gt.a.BLENDED,i.version.set(J.a.isWebgl2?"300 es":"100"),this}setColor(t,e,n){this.params.color||(this.params.color=o.vec3.create()),o.vec3.set(this.params.color,t,e,n)}}class an extends xt.a{constructor(t){super({uid:"flare",vert:Qe()(),frag:tn()()}),this.material=t;const e=this.inputs;e.add(this.version=new Tt.a("100")),e.add(this.precision=new Pt.a("highp")),e.add(this.shaderid=new Mt.a("id_flare",!0)),e.add(this.texcoord0=new Ft.a("aTexCoord0",o.mat3.create())),e.add(this.alpha=new St.d("alpha",1)),e.add(this.alphaFactor=new St.d("alphaFactor",1)),e.add(this.alphaCutoff=new St.d("alphaCutoff",1)),e.add(this.alphaMode=new Ot.a("alphaMode",Et.a)),e.add(this.doubleSided=new Mt.a("doubleSided",!1))}prepare(t,e,n){const i=this.material.params.texs;t.uMVP&&(n.modelViewProjectionMatrix(en,e._wmatrix),t.uMVP(en)),t.uColor&&t.uColor(this.material.params.color),t.tMain&&t.tMain(i.get("Flare"))}}const on=o.vec3.create(),sn=o.mat4.create(),rn=o.vec3.create();class ln{constructor(t){this.opaqueRenderers=[],this.blendedRenderers=[],this.hasDotsEffect=!1,this.isClickable=!0,this.scene=t,this.isHovered=!1,this.onClick=new x.a,this.mouseWorldPosition=o.vec3.create()}init(t){this.gltf=t,this.root=t.getElementByName(bt.a.NODE,"Bottle"),this.interior=this.getRendererByName("Interior"),this.flare=this.getRendererByName("Flare"),this.getRenderers(["Body","Top","Cap_Gold","Cap_Sparkled_Gold"],this.opaqueRenderers),this.getRenderers(["TextFront"],this.blendedRenderers),this.initMaterials();var e=this.getRendererByName("Collider").node;this.scene.pickingController.addPickable(this,e),this.initTapAnchor();const n=this.scene.cmnTexs.get("Bottle_dots");n.bind(),n.setFilter(!1)}initMaterials(){const t=new He(this.scene);this.interior.materials[0]=t,t.verticalSize=this.interior.bounds.max[1]-this.interior.bounds.min[1],t.matcap=this.scene.cmnTexs.get("Bottle_Interior_MatCap"),t.colorRamp=this.scene.cmnTexs.get("Bottle_Interior_Ramp");const e=this.getRendererByName("Body"),n=e.materials[0]=new Se(this.scene,{texs:this.scene.cmnTexs,backgroundFbo:this.scene.refractedBackground.getFbo(),verticalSize:e.bounds.max[1]-e.bounds.min[1]});this.glassMaterial=n,this.getRendererByName("Top").materials[0]=new Ye(this.scene,{matcapMap:this.scene.cmnTexs.get("Bottle_Top_MatCap")});const i=this.getRendererByName("Cap_Gold");i.materials[0]=new Ye(this.scene,{matcapMap:this.scene.cmnTexs.get("Bottle_Gold_MatCap"),normalMap:i.materials[0].getPass(ft.a.COLOR).pass.normal.param._tex,normalIntensity:4,aoMap:i.materials[0].getPass(ft.a.COLOR).pass.occlusion.param._tex,aoIntensity:.9}),this.getRendererByName("Cap_Sparkled_Gold").materials[0]=new Ye(this.scene,{matcapMap:this.scene.cmnTexs.get("Bottle_SparkledGold_MatCap"),normalMap:this.scene.cmnTexs.get("Bottle_SparkledGold_NormalMap"),normalIntensity:1});const a=this.getRendererByName("TextFront");a.materials[0]=new Ye(this.scene,{matcapMap:this.scene.cmnTexs.get("Bottle_SparkledGold_MatCap"),alphaMap:a.materials[0].getPass(ft.a.COLOR).pass.alpha.param._tex});const o=new nn(this.scene,{color:G.hexColorToVec3("ffdf6e"),texs:this.scene.cmnTexs});this.flare.materials[0]=o}initTapAnchor(){const t=this.tapAnchor=new we.a;o.vec3.copy(t.position,this.root.position),t.position[0]=1.7,t.position[1]=5.25,this.gltf.root.add(t)}getRenderers(t,e){t.forEach(t=>{e.push(this.getRendererByName(t))})}getRendererByName(t){return this.gltf.getElementByName(bt.a.NODE,t).renderable}getTapButtonScreenPosition(t){return G.getNodeScreenPosition(on,this.tapAnchor,t)}animateBottleRotation(){this.root.rotateY(.5*this.scene.dt)}updateMouseWorldPosition(){const t=this.picking.pos;o.vec3.set(this.mouseWorldPosition,t[0],t[1],t[2])}updateClickPosition(){o.mat4.invert(sn,this.picking.node._wmatrix),o.vec3.transformMat4(rn,this.mouseWorldPosition,sn),this.glassMaterial.setClickPosition(rn)}triggerWave(){this.updateClickPosition(),this.glassMaterial.waveRadius=0,j.a.killTweensOf(this.glassMaterial),j.a.to(this.glassMaterial,{waveRadius:11,duration:2.5})}preRender(){this.animateBottleRotation(),this.updateMouseWorldPosition(),this.glassMaterial.setMouseScreenPosition(this.scene.inputs.mpos),this.glassMaterial.setDotsFactor(this.isHovered||this.hasDotsEffect||Y.a.isMobile?1:0),this.isClickable&&M.c.store.bottleEntered&&(this.isClickable=!1)}handlePickingEnter(){}handlePickingExit(){}handleClick(){this.isClickable&&(this.triggerWave(),this.onClick.emit())}render(t){this.opaqueRenderers.forEach(e=>{e.render(this.scene,t,gt.a.OPAQUE,ft.a.DEFAULT)}),this.blendedRenderers.forEach(e=>{e.render(this.scene,t,gt.a.BLENDED,ft.a.DEFAULT)}),this.flare.render(this.scene,t,gt.a.BLENDED,ft.a.DEFAULT)}renderInteriorOnly(t){this.interior.render(this.scene,t,gt.a.BLENDED,ft.a.DEFAULT)}}var cn=n(37),hn=n(41),un=n(339),dn=n.n(un),pn=n(340),mn=n.n(pn),vn=n(341),gn=n.n(vn),fn=n(342),bn=n.n(fn),xn=n(343),_n=n.n(xn),yn=n(344),wn=n.n(yn);const Cn=o.mat4.create(),Tn=o.vec3.create(),Pn=o.quat.create();class Mn{constructor(t){this.zengarden=t,this._cameraRx=.0436,this._cameraRy=1e-5,this._cameraFov=52.0001,this._projDist=.9999,this._quadInvalid=!0;const e=t.scene.gl;this.camera=p.a.makePerspectiveCamera(),this.camera.lens.far=30,this.camera.lens.near=5,this.camera.lens.setAutoFov(40*U.a),t.scene.root.add(this.camera),this.quadVertsBuffer=new ArrayBuffer(48),this.quadVerts=[new Float32Array(this.quadVertsBuffer,0,3),new Float32Array(this.quadVertsBuffer,12,3),new Float32Array(this.quadVertsBuffer,24,3),new Float32Array(this.quadVertsBuffer,36,3)],this.quad=new hn.a(e),this.quad.attrib("aPosition",3,e.FLOAT);const n=new Float32Array([0,0,1,0,0,1,1,1]);this.uvs=new hn.a(e,n).attrib("aTexCoord0",2,e.FLOAT)}set cameraRx(t){this._cameraRx=t,this._quadInvalid=!0}get cameraRx(){return this._cameraRx}set cameraRy(t){this._cameraRy=t,this._quadInvalid=!0}get cameraRy(){return this._cameraRy}set cameraFov(t){this._cameraFov=t,this._quadInvalid=!0}get cameraFov(){return this._cameraFov}set projDist(t){this._projDist=t,this._quadInvalid=!0}get projDist(){return this._projDist}attribPointer(t){this.uvs.attribPointer(t),this.quad.attribPointer(t)}reprojectQuad(){if(!this._quadInvalid)return;const t=this.camera.rotation;o.quat.rotateX(t,Pn,this.cameraRx),o.quat.rotateY(t,t,this.cameraRy),this.camera.lens.setHorizontalFov(this.cameraFov*U.a),this.camera.invalidate(),this.camera.updateWorldMatrix(),this.camera.updateViewProjectionMatrix(1,1),o.mat4.invert(Cn,this.camera._viewProj);for(let t=0;t<4;t++)Tn[0]=1&t?-1:1,Tn[1]=2&t?-1:1,Tn[2]=this.projDist,o.vec3.transformMat4(Tn,Tn,Cn),o.vec3.add(this.quadVerts[t],this.camera._wposition,Tn);this.quad.data(this.quadVertsBuffer),this._quadInvalid=!1}drawQuad(){this.quad.drawTriangleStrip()}}var Sn=n(292),En=n(293),On=n(243);class Ln{constructor(t){this.zengarden=t,this.post=new En.a(t.scene.gl,!1),this.fetch=new Sn.a,this.post.add(this.fetch);const e=new On.a;e.scatter=.61,e.clamp=20,e.threshold=0;e.color.set([1.9,1.9,1.9]),this.bloom=e,this.post.add(e)}preRender(t,e){this.post.preRender(t,e)}bindColor(){this.post.bindColor()}render(t){const e=this.post;if(!e.enabled)return;const n=e.gl;e.mainColor.bind(),e.mainColor.setFilter(!0,!1,!1),e.mipmap&&n.generateMipmap(n.TEXTURE_2D);for(var i=0;i<e._effects.length;i++)e._effects[i].preRender();t.bind(),n.viewport(0,0,t.width,t.height),e._shaderInvalid&&e.buildProgram(),e.prg.use();for(i=0;i<e._effects.length;i++)e._effects[i].setupProgram(e.prg);if(e.prg.tInput(e.mainColor),e._needDepth()){if(!e.hasDepthTexture)throw"no depth texture";e.prg.tDepth(e.mainFbo.getDepth())}e.fillScreen(e.prg)}}var An=n(46),Dn=n(223);var Nn=new(n(245).a)({options:{bbc:!1,flipY:!1,filtering:9729,wrap:0,genMips:!1},sources:[{codec:"std",lods:[{files:["/assets/webgl/ray_44874f87211da69332533a229deaa64a.jpg"],buffers:null}],datas:null}]});const Rn=o.mat4.create();class In{constructor(t){this.zengarden=t;const e=this.zengarden.scene,n=e.gl;this.linesCfg=e.glstate.config().enableBlend().blendFunc(n.ONE,n.ONE).lineWidth(1).enableCullface(!1),this.facesCfg=e.glstate.config().enableBlend().blendFunc(n.ONE,n.ONE).enableCullface(!1),this.lineColor=Object(Dn.e)(16777215,.6),this.faceColor=Object(Dn.d)(13936493),o.vec3.scale(this.faceColor,this.faceColor,.3),Nn.load("zg_ray",t.scene.cmnTexs)}parse(t){const e=this.zengarden.scene.gl,n=new Uint32Array(t,0,6),[i,a,o,s,r,l]=n,c=new Uint8Array(t,i,a),h=new Uint8Array(t,o,s),u=new Uint8Array(t,r,l);this.vbuffer=new hn.a(e,c).attrib("aPosition",4,e.FLOAT).attrib("aDirection",4,e.FLOAT).attrib("aAxisA",4,e.FLOAT).attrib("aAxisB",4,e.FLOAT),this.ibuffer=new An.a(e,e.UNSIGNED_SHORT,h),this.tbuffer=new hn.a(e,u).attrib("aPosition",3,e.FLOAT).attrib("aAxisA",3,e.FLOAT).attrib("aAxisB",4,e.FLOAT)}render(t,e){this.renderLines(t,e),this.renderFaces(t,e)}renderLines(t,e){const n=this.zengarden.linesPrg,i=this.zengarden.scene.cmnTexs.get("zg_ray");i.bind(),i.clamp(),n.use(),o.mat4.multiply(Rn,t._view,this.zengarden.node._wmatrix),n.uModelView(Rn),n.uProjection(t.lens.getProjection()),n.uColor(this.lineColor),n.uTime(this.zengarden.time%1*Math.PI*2),n.uCycle(e),n.tRay(this.zengarden.scene.cmnTexs.get("zg_ray")),this.vbuffer.attribPointer(n),this.linesCfg.apply(),this.ibuffer.bind(),this.ibuffer.drawTriangles()}renderFaces(t,e){const n=this.zengarden.facesPrg;n.use(),t.modelViewProjectionMatrix(Rn,this.zengarden.node._wmatrix),n.uMVP(Rn),n.uColor(this.faceColor),n.uCycle(e),n.uTime(this.zengarden.time%1*Math.PI*2),this.tbuffer.attribPointer(n),this.facesCfg.apply(),this.tbuffer.drawTriangles()}}o.mat4.create(),o.mat4.create(),o.quat.create();class kn{constructor(t){this.scene=t,this.gscale=2.3,this.rotation=.801,this.time=0,this.node=new r.a,this.node.setScale(this.gscale),this.node.position.set([-10.65,-19.05,-32.2]),this.node.rotateY(this.rotation),this.scene.root.add(this.node);const e=t.gl;this.camera=p.a.makePerspectiveCamera(),this.camera.lens=this.scene.camera.lens,this.scene.root.add(this.camera),this.projector=new Mn(this),this.lines=new In(this),this.linesBuffer=new hn.a(e).attrib("aPosition",4,e.FLOAT).attrib("aAxisA",3,e.FLOAT).attrib("aAxisB",3,e.FLOAT),this.outputFbo=new O.a(e),this.outputFbo.attachColor(e.RGB,e.UNSIGNED_BYTE),this.outputFbo.resize(4,4),this.postFx=new Ln(this),this.compositingCfg=t.glstate.config().enableDepthTest(!1).enableCullface(!1),this.compilePrograms(),this.lumparams=new Float32Array([8.0001,-.250001])}compilePrograms(){const t=this.scene.gl;this.linesPrg=new E.a(t,dn()(),mn()()),this.compoPrg=new E.a(t,gn()(),bn()()),this.facesPrg=new E.a(t,_n()(),wn()())}async load(){const t=await Object(cn.c)(J.a.asset_url("hub/zengarden/zengarden2.bin"),this.scene.resources);this.lines.parse(t)}preRender(){this.camera.rotation.set(this.scene.camera.rotation),this.camera.invalidate()}rtt(){this.time+=.003}render(t){const e=[1*Math.cos(this.time),1*Math.sin(this.time)];this.lines.render(t,e)}}var Hn=n(246);class Fn{constructor(t){this.scene=t;const e=this.scene.gl;this.fbo=new O.a(e),this.fbo.attachColor(e.RGB,e.UNSIGNED_BYTE),this.fbo.resize(4,4);const n=this.fbo.getColor();n.bind(),n.clamp(),n.setFilter(!0,!1,!1),this.cfg=this.scene.glstate.config(),this.cfg.enableDepthTest(!0).depthMask(!0).cullFace(e.BACK),this.fxaa=new Hn.a(this.scene.gl)}bind(t,e){const n=this.scene.gl,i=t/window.devicePixelRatio,a=e/window.devicePixelRatio;this.fxaa.resize(i,a),this.fxaa.fbo.bind(),this.fxaa.fbo.clear(),n.viewport(0,0,i,a)}getFbo(){return this.fbo}applyFxaa(t,e){const n=t/window.devicePixelRatio,i=e/window.devicePixelRatio;this.fbo.resize(n,i),this.fbo.bind(),this.fbo.clear(),this.fxaa.render()}}var zn=n(47);class Bn{constructor(t,e){this.glstate=t.glstate,this.quad=t.quad,this.prg=e;const n=t.gl;this.glconfig=(new zn.c).enableCullface(!1).enableDepthTest(!1).enableBlend().blendFunc(n.SRC_ALPHA,n.ONE_MINUS_SRC_ALPHA),this.opacity=0}async fadeToBlack(t,e="power2.in"){await j.a.to(this,{opacity:1,duration:t,ease:e})}async fadeFromBlack(t,e="power2.out"){this.opacity=1,await j.a.to(this,{opacity:0,duration:t,ease:e})}render(){this.glstate.push(this.glconfig),this.glstate.apply(),this.prg.use(),this.prg.uOpacity(this.opacity),this.quad.attribPointer(this.prg),this.quad.render(),this.glstate.pop()}}var Vn=n(4);class Un{constructor(t){this.preCompileMats=()=>this.matlib.compileAllAsync(),this.onLoaded=()=>{this.programs.compile(),st.processGltfs(this,this.gltfs),this.dome.init(this.gltfs.get("Skybox")),this.bottle.init(this.gltfs.get("Bottle")),this.portals.init(this.gltfs.get("Portals")),this.loaded=!0},this.dt=0,this.time=0,this.ratio=1,this.loaded=!1,this.audioResources=t}enter(){console.log("[SCENE][Hub] Enter")}leave(){console.log("[SCENE][Hub] Leave")}attachResources(t){this.resources=t}init(t){this.loaddefer=new c.a,this.glview=t,this.gl=this.glview.gl,this.mainCamera=this.makeCamera(),this.devCamera=this.makeCamera(),this.camera=this.mainCamera,this.cmnTexs=new h.a("cmn",this.gl,this.resources),this.gltfs=new d.a("gltfs",this.gl,this.resources),st.setupCmnTexs(this.cmnTexs),st.setupGltfs(this.gltfs),this.sroot=new r.a,this.root=new r.a,this.ilayer=document.getElementById("hub-ui-container"),this.glstate=new s.a(this.gl),this.quad=new l.a(this.gl),this.inputs=new C.a(this.ilayer),this.postProcess=new V(this,"hub"),this.postProcess.enabled=!1,this.matlib=new u.a(this),this.raycaster=new T.a(this),this.programs=new vt(this),this.envRotation=0,this.hasLeftHub=!1,this.pickingController=new w(this),this.fadeController=new Bn(this,this.programs.fade),this.camController=new v.a(this,this.devCamera),this.maxcam=new g.a(this.glview.canvas),this.hubCameraController=new Q(this.ilayer,{dist:.01,minDist:.01,maxDist:.01,rotateSpeed:10,wheelSpeed:.15,dragSpeed:Y.a.isDesktop?-10:-4}),this.camController.setControler(this.hubCameraController),this.hubCameraController.resetFov(),this.root.add(this.mainCamera),this.root.add(this.devCamera),this.sroot.add(this.root),this.dome=new ye(this),this.bottle=new ln(this),this.portals=new _e(this),this.zengarden=new kn(this),this.zengarden.load(),this.refractedBackground=new Fn(this),this.elementAngles=this.portals.portals.map(t=>t.angle),this.elementAngles.unshift(0),this.inputs.start(),this.portals.onSelectPortal.on(t=>{this.hasLeftHub||(this.hasLeftHub=!0,P.a.push({name:t.gameId,params:{lang:Vn.a.locale}}))}),this.hubCameraController.onDragging.on(()=>{this.portals.forEachPortal(t=>{t.fadeInLogo(1),t.setMode(be.LOW)})}),this.hubCameraController.onSlowDown.on(()=>{const t=this.hubCameraController.getIndexOfNearestAngle(this.elementAngles),e=this.elementAngles[t];this.hubCameraController.focusAngle(e),M.c.store.hubIndex=t}),this.hubCameraController.onHalt.on(()=>{this.portals.forEachPortal(t=>{t!==this.nearestPortal&&t.setMode(be.LOW)}),this.nearestPortal&&(this.nearestPortal.setMode(this.nearestPortal.isHovered?be.HIGH:be.MEDIUM),this.nearestPortal.fadeOutLogo(1,1))}),this.hubCameraController.onFastDrag.on(()=>{this.playRotationSound()}),this.portals.onMouseEnterPortal.on(t=>{this._onPortalHovered(t,!0)}),this.portals.onMouseExitPortal.on(t=>{this._onPortalHovered(t,!1)}),this.pickingController.onClick.on(()=>{}),this.bottle.onClick.on(()=>{M.c.store.bottleEntered=!0})}initAudio(){this.portalHoverLoop=this.audioResources.get("PORTAL_HOVER_LOOP").play(0,!0),this.portalHoverLoop.node.loopStart=1,this.portalHoverLoop.node.loopEnd=4,this.lastRotationSoundTime=Date.now()}fadeInPortalHoverLoop(){j.a.to(this.portalHoverLoop.gain.gain,{duration:1,value:1})}fadeOutPortalHoverLoop(){j.a.to(this.portalHoverLoop.gain.gain,{duration:1,value:0})}playRotationSound(){Date.now()-this.lastRotationSoundTime>500&&(this.audioResources.get("DOME_ROTATION").play(1,!1),this.lastRotationSoundTime=Date.now())}handleResize(){}render(t){this.loaded&&(this.dt=t,this.time+=t,this.camera=this.devCamera,this.drawScene(this.camera))}drawScene(t,e=null,n=!1){const i=this.gl,a=e?e.width:this.glview.width,o=e?e.height:this.glview.height;this.ratio=a/o,this.camController.preRender(),this.dome.preRender(),this.bottle.preRender(),this.portals.preRender(),this.zengarden.preRender(),this.pickingController.preRender(),this.updateStoreProperties(),this.updateNearestPortal(),this.root.rotation.set([0,0,0,1]),this.root.rotateY(this.envRotation),this.sroot.updateWorldMatrix(),t.updateViewProjectionMatrix(a,o),this.zengarden.rtt(),this.refractedBackground.bind(a,o),this.dome.material.forceTextureLQ=!0,this.dome.setColor(.68,.33,.06);const s=this.dome.material.getOverlayFactor();this.dome.material.setOverlayFactor(0),this.dome.render(t),this.dome.setColor(1,1,1),this.dome.material.setOverlayFactor(s),this.dome.material.forceTextureLQ=!1,this.bottle.renderInteriorOnly(t),this.refractedBackground.applyFxaa(a,o),this.glstate.apply(),i.clearColor(0,0,0,1),this.postProcess.preRender(a,o),this.postProcess.bindColor(),this.dome.render(t),this.zengarden.render(t),this.bottle.render(t),this.portals.render(t),this.glstate.apply(),this.postProcess.render(),this.portals.postRender(),this.fadeController.render()}async load(){await this.preCompileMats()}makeCamera(){const t=new p.a(new m.a);return t.lens.near=.1,t.lens.far=100,t.z=2,t.y=0,t.lookAt(o.vec3.fromValues(0,t.y,0)),t}lookAtElement(t){if(t!==this.hubCameraController.getIndexOfNearestAngle(this.elementAngles)){const e=this.elementAngles[t];this.hubCameraController.focusAngle(e),this.hubCameraController.getIndexOfNearestAngle(this.elementAngles)!==t&&this.playRotationSound(),this.portals.forEachPortal(t=>{t.fadeInLogo(1),t.setMode(be.LOW)})}}async playExitAnimation(t){return null!==this.nearestPortal&&this.hubCameraController.playZoomTransition(t),this.fadeController.fadeToBlack(t)}setBottleView(t){const e=this.hubCameraController;e.controlsEnabled=!t,t?(Y.a.isMobile||(window.innerWidth<window.innerHeight?e.rotateTo(0,e.defaultPhi-.15):e.rotateTo(-.15,e.defaultPhi+.025)),this.bottle.isClickable=!1):(e.rotateTo(0,e.defaultPhi),setTimeout(()=>{this.bottle.isClickable=!0},1e3)),this.dome.setOverlayVisible(t),this.bottle.hasDotsEffect=t}updateStoreProperties(){M.c.store.bottleHovered=this.bottle.isHovered;const t=this.bottle.getTapButtonScreenPosition(this.camera);M.c.store.hubTapPos.x=t[0],M.c.store.hubTapPos.y=t[1]}updateNearestPortal(){const t=this.hubCameraController.getIndexOfNearestAngle(this.elementAngles);this.nearestPortal=t>0?this.portals.getPortal(t-1):null}setPortalHovered(t,e){const n=this.portals.getPortal(t);this._onPortalHovered(n,e)}_onPortalHovered(t,e){e?(t.setMode(be.HIGH),this.fadeInPortalHoverLoop()):(t.setMode(be.MEDIUM),this.fadeOutPortalHoverLoop())}resetUIState(){M.c.store.bottleEntered=!1}async dispose(){var t,e,n,i,a,o,s;this.resetUIState(),null===(t=this.programs)||void 0===t||t.dispose(),null===(e=this.camController)||void 0===e||e.setControler(null),null===(n=this.inputs)||void 0===n||n.release(),null===(i=this.raycaster)||void 0===i||i.dispose(),null===(a=this.matlib)||void 0===a||a.dispose(),null===(o=this.portalHoverLoop)||void 0===o||o.dispose(),await(null===(s=this.cmnTexs)||void 0===s?void 0:s.unload())}}var Wn=n(83),Gn=n(18),jn=n(38);class Yn extends Wn.a{constructor(){super(),this.name="Hub",console.log("[MODULE][Hub] instantiate")}init(t){super.init(t),this._scene=new Un(this.audioResources),this._scene.attachResources(this.resources);let e=window.innerWidth>=768?"desktop":"mobile";new Gn.a("hub-preview",n(128)("./hub-preview-"+e+".jpg"),this.preloadedResources),new Gn.a("hub-logo",n(354),this.preloadedResources),new Gn.a("poster-rule1",n(355),this.preloadedResources),new Gn.a("poster-rule2",n(356),this.preloadedResources),new Gn.a("poster-rule3",n(357),this.preloadedResources),new Gn.a("game-thumbnail-1",n(121),this.resources),new Gn.a("game-thumbnail-2",n(122),this.resources),new Gn.a("game-thumbnail-3",n(123),this.resources),new Gn.a("game-thumbnail-4",n(124),this.resources),new Gn.a("radar",n(358),this.resources),this.audioGroup=this.audioResources,this.context=this.audioGroup.audioModule.context,this.masterDest=this.audioGroup.audioModule.masterNode,this.masterGain=this.context.createGain(),this.masterGain.connect(this.masterDest),new jn.a("DOME_MAIN_LOOP","hub/DOME_MAIN_LOOP",this.audioGroup),new jn.a("ENTER_PORTAL","hub/ENTER_PORTAL",this.audioGroup),new jn.a("DOME_ROTATION","hub/DOME_ROTATION",this.audioGroup),new jn.a("PORTAL_HOVER_LOOP","hub/PORTAL_HOVER_LOOP",this.audioGroup)}async playExitAnimation(t){return this._scene.playExitAnimation(t)}onClickButton(t){this._scene.lookAtElement(t)}onEnterBottle(){this._scene.setBottleView(!0)}onExitBottle(){this._scene.setBottleView(!1)}onLoaded(){this.playHubLoop(),this._scene.initAudio()}playHubLoop(){this.hubMusicLoop=this.audioGroup.get("DOME_MAIN_LOOP").play(1,!0),this.hubMusicLoop.node.loopStart=1,this.hubMusicLoop.node.loopEnd=11}async leave(){let t=null;return this.audioGroup.get("ENTER_PORTAL").play(1,!1),this.hubMusicLoop&&(t=new Promise(t=>{j.a.to(this.hubMusicLoop.gain.gain,{duration:1,value:0,onComplete:()=>{t()}})})),Promise.all([t,super.leave()]).then(()=>{this.dispose()})}dispose(){var t;null===(t=this.hubMusicLoop)||void 0===t||t.dispose(),this.hubMusicLoop=null}onMouseEnterPlayButton(t){this._scene.setPortalHovered(t,!0)}onMouseExitPlayButton(t){this._scene.setPortalHovered(t,!1)}}var $n=n(39),qn=n(84),Xn=n(0),Kn=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"c-Hubpanel",class:{"is-hubpanel-active":t.active,"is-hidden":t.isHidden}},[n("object-fit",{staticClass:"c-Hubpanel-bg",attrs:{width:t.background.width,height:t.background.height}},[n("img",{staticClass:"js-object-fit c-Hubpanel-bg-img",attrs:{src:t.background.src,alt:"",draggable:"false"}})]),t._v(" "),n("div",{staticClass:"c-Hubpanel-inner"},[n("h1",{staticClass:"t-text--xxl"},[t._v(t._s(t.t("common.dome_welcome")))]),t._v(" "),n("img",{staticClass:"c-Hubpanel-inner-logo",attrs:{src:t.logo.src,alt:"",draggable:"false"}}),t._v(" "),n("button",{staticClass:"c-Hubpanel-btn t-btn",class:{"is-loaded":t.isLoaded},attrs:{type:"button"},on:{mouseenter:t.onHover,click:t.onBtnClick}},[n("span",{staticClass:"c-Hubpanel-btn-content"},[n("span",{ref:"progress",staticClass:"c-Hubpanel-btn-content-progress"},[t._v("0")]),t._v(" "),n("span",{staticClass:"c-Hubpanel-btn-content-start"},[t._v(t._s(t.t("common.tuto_dome_cta")))])]),t._v(" "),n("svg",{ref:"btn",staticClass:"c-Hubpanel-btn-svg",attrs:{width:"145",height:"49",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 145 49"}},[n("path",{attrs:{d:"M72.3.5h48.2c13.2 0 24 10.8 24 24v0c0 13.2-10.8 24-24 24h-96c-13.2 0-24-10.8-24-24v0c0-13.2 10.8-24 24-24h47.8z",fill:"none",stroke:"#FFF","stroke-miterlimit":"10"}})])])])],1)};Kn._withStripped=!0;var Zn={name:"HubPanel",components:{ObjectFit:n(31).a},props:{active:{type:Boolean,default:!1},logo:{type:HTMLImageElement|Object},background:{type:HTMLImageElement|Object},onStart:{type:Function,default:()=>{}}},data:()=>({isHidden:!1,isLoaded:!1,resCount:0,loadCount:0}),created(){this.pourcent=0,this.smoothPourcent=0},mounted(){this._updateRAF=this.updateRAF.bind(this),a.RAF.subscribe("instructionsPanel",this._updateRAF)},beforeDestroy(){a.RAF.unsubscribe("instructionsPanel",this._updateRAF)},methods:{updateRAF(){this.active&&!this.isLoaded&&(this.smoothPourcent<.99?(this.smoothPourcent+=.1*(this.pourcent-this.smoothPourcent),this.$refs.progress.textContent=Math.round(100*this.smoothPourcent),this.$refs.btn.style.strokeDashoffset=343-343*this.smoothPourcent):(this.$refs.progress.textContent=100,this.$refs.btn.style.strokeDashoffset=0,this.isLoaded=!0))},watchResource(t){let e=[];t.collectAllLoadables(e),this.resCount=e.length,this.loadCount=0,e.map(t=>{t.then(this.onResourceLoaded)})},onResourceLoaded(t){this.loadCount+=1,this.pourcent=this.loadCount/this.resCount},onBtnClick(){this.isLoaded&&this.active&&(this.onStart(),this.$appdatas.audioLayout.play("WHITE_BUTTON_CLICK"),setTimeout(()=>{this.isHidden=!0},600))},onHover(){this.$appdatas.audioLayout.play("HOVER")}}},Qn=(n(359),n(5)),Jn=Object(Qn.a)(Zn,Kn,[],!1,null,null,null);Jn.options.__file="src/components/hub-panel/hub-panel.vue";var ti=Jn.exports,ei=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"c-HubNavigation"},[n("ul",{staticClass:"c-HubNavigation-list t-list"},t._l(t.items,(function(e,i){return n("li",{key:e.index,staticClass:"c-HubNavigation-list-item"},[n("button",{staticClass:"t-btn t-btn--game",class:{"is-active":e.index===t.$appdatas.store.hubIndex,"is-complete":t.checkCompleteGame(e.realIndex),"is-default":0===e.index},attrs:{type:"button"},on:{mouseenter:t.onHover,click:function(n){return t.onClick(e.index)}}},[n("span",{staticClass:"hide-for-viewer"},[t._v(t._s(t.t("gaming."+t.formatGameString(e.name)+"_title")))]),t._v(" "),e.name===t.productSlug?n("ui-icon",{attrs:{type:"flask",color:"dark"}}):n("img",{staticClass:"c-HubNavigation-list-thumbnail",attrs:{src:t.gameThumbnails[e.realIndex].src,alt:"Game "+e.index+" thumbnail",width:t.gameThumbnails[e.realIndex].width,height:t.gameThumbnails[e.realIndex].height}})],1)])})),0),t._v(" "),n("div",{staticClass:"c-HubNavigation-indicator",style:{transform:"rotate("+t.rotatePosition+"deg)"}},[n("img",{staticClass:"c-HubNavigation-indicator-gradient",attrs:{src:t.radarImg.src}})])])};ei._withStripped=!0;var ni={components:{"ui-icon":n(88).a},props:{gameThumbnails:{type:Array},radarImg:{type:HTMLImageElement||Object},onNavClick:{type:Function,default:()=>{}}},data:function(){return{productSlug:"PRODUCT",items:[],angle:180}},computed:{rotatePosition(){return Object(U.e)(this.angle,0,360,this.minPosition,this.maxPosition)}},watch:{"$appdatas.store.hubIndex":"onHubIndexChange"},created(){this.minPosition=-78,this.maxPosition=78;let t=[];const e=Object.values(M.a);[3,2,0,1].forEach((n,i)=>{const a=parseInt(e[n].replace(/^\D+/g,""));t.push({name:e[n],index:i+1,realIndex:a-1})}),t.splice(t.length/2,0,{name:this.productSlug,index:0,realIndex:-1}),this.items=t},methods:{checkCompleteGame(t){const e="GAME_"+(t+1);return this.$appdatas.store.completeGames.indexOf(e)>-1||t===this.productSlug},formatGameString:t=>t.toLowerCase().replace(/_/g,""),onHubIndexChange(){switch(this.$appdatas.store.hubIndex){case 1:return void(this.angle=0);case 2:return void(this.angle=90);case 3:return void(this.angle=270);case 4:return void(this.angle=360);default:this.angle=180}},onClick(t){this.onNavClick(t),this.$appdatas.audioLayout.play("GENERAL_CLICK")},onHover(){this.$appdatas.audioLayout.play("HOVER")}}},ii=(n(361),Object(Qn.a)(ni,ei,[],!1,null,null,null));ii.options.__file="src/components/hub-navigation/hub-navigation.vue";var ai=ii.exports,oi=n(289);const si=Object(qn.a)(Yn);var ri={_module:si,mixins:[si,$n.a],components:{HubPanel:ti,HubNavigation:ai,CursorTrigger:oi.a},data:()=>({instructionActive:!1,isLoaded:!1,isCursorPointer:!1,navigationActive:!0,games:[]}),watch:{"$appdatas.store.hubTapPos.x":"onTapPosChange","$appdatas.store.hubTapPos.y":"onTapPosChange","$appdatas.store.bottleEntered":"onBottleEntered","$appdatas.store.bottleHovered":"onBottleHovered"},computed:{sustainabilityText(){return this.tAndReplaceYouthGenerating("el_content.bottle_sustainability_text")}},created(){const t=Object.values(M.a);[3,2,0,1].forEach((e,n)=>{this.games.push(t[e])}),this.x=0,this.targetX=0,this.y=0,this.targetY=0},mounted(){this.onTapPosChange(),this._updateRAF=this.updateRAF.bind(this),a.RAF.subscribe("hub",this._updateRAF)},beforeDestroy(){a.RAF.unsubscribe("hub",this._updateRAF)},methods:{prepareLoading(){this.$refs.loader.watchResource(this.getModule().resources)},enter(){this.instructionActive=!0,this.$appdatas.store.pageTracking="/dome-instructions"},onStart(){this.instructionActive=!1,this.$appdatas.store.pageTracking="/dome"},onLoaded(){this.isLoaded=!0,this.$appdatas.store.showHubPreview=!1},async leave(){j.b.to(this.$el,{opacity:0,duration:.8,ease:Xn.f.easeOut}),await this.getModule().playExitAnimation(.8)},formatGameString:t=>t.toLowerCase().replace(/_/g,""),onBottleEntered(){this.$appdatas.store.bottleEntered&&this.showBottleInfo()},onBottleHovered(){this.instructionActive||this.$appdatas.store.bottleEntered||(this.$appdatas.store.bottleHovered?(this.isCursorPointer=!0,this.$eventHub.$emit("cursor:leave","drag")):(this.isCursorPointer=!1,this.$eventHub.$emit("cursor:enter","drag")))},showBottleInfo(){this.navigationActive=!1,this.$appdatas.store.bottleEntered=!0,this.getModule().onEnterBottle(),this.$appdatas.audioLayout.play("GENERAL_CLICK"),this.$appdatas.sendEvent("click","bottle","")},hideBottleInfo(){this.navigationActive||(this.navigationActive=!0,this.$appdatas.store.bottleEntered=!1,this.getModule().onExitBottle())},updateRAF(){this.x+=.1*(this.targetX-this.x),this.y+=.1*(this.targetY-this.y),this.$refs.tapBtnInner.style.transform=`translate3d(${this.x}px, ${this.y}px, 0)`},onTapPosChange(){this.$refs.tapBtn.style.transform=`translate3d(${this.$appdatas.store.hubTapPos.x}px, ${this.$appdatas.store.hubTapPos.y}px, 0)`},onNavClick(t){this.$appdatas.store.hubIndex=t,this.getModule().onClickButton(t)},labelForDesktop(t,e){return!Y.a.isDesktop||"MacIntel"===navigator.platform&&navigator.maxTouchPoints>1?this.t(t):this.t(e)},onDragStart(){!this.instructionActive&&this.navigationActive&&(this.pointerEvent="mousedown"!==event.type?event.touches[0]||event.changedTouches[0]:event,this.dragStart=!0,this.startX=this.pointerEvent.clientX)},onDrag(t){this.pointerEvent="mousemove"!==t.type?t.touches[0]||t.changedTouches[0]:t,this.$appdatas.store.bottleHovered?(this.targetX=this.pointerEvent.clientX-this.$appdatas.store.hubTapPos.x,this.targetY=this.pointerEvent.clientY-this.$appdatas.store.hubTapPos.y):(this.targetX=0,this.targetY=0),this.dragStart&&!this.dragged&&!Y.a.isMobile&&Math.abs(this.startX-this.pointerEvent.clientX)>10&&(this.dragged=!0,this.$eventHub.$emit("cursor:enter","dragged"))},onDragEnd(){this.dragStart&&(this.dragStart=!1,Y.a.isMobile||(this.$eventHub.$emit("cursor:leave","dragged"),this.dragged=!1))},onPlayEnter(t){this.$appdatas.audioLayout.play("HOVER"),this.getModule().onMouseEnterPlayButton(t)},onPlayLeave(t){this.getModule().onMouseExitPlayButton(t)}}},li=(n(363),Object(Qn.a)(ri,i,[],!1,null,null,null));li.options.__file="src/modules/hub/Hub.vue";e.default=li.exports}}]);